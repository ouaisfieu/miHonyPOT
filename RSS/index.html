<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLAIDOYER CITOYEN â€” Poste de Travail</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&family=Archivo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DESIGN SYSTEM â€” Civic Tech Professional
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            /* Couleurs principales - Palette Civique */
            --bg-primary: #0c1117;
            --bg-secondary: #151b23;
            --bg-tertiary: #1c242e;
            --bg-card: #1a2332;
            --bg-elevated: #212d3b;
            --bg-input: #0f1419;
            
            /* Accents */
            --civic-blue: #3d8af7;
            --civic-blue-light: #60a5fa;
            --civic-blue-dark: #2563eb;
            --civic-green: #22c55e;
            --civic-green-light: #4ade80;
            --civic-amber: #f59e0b;
            --civic-amber-light: #fbbf24;
            --civic-red: #ef4444;
            --civic-purple: #a855f7;
            --civic-teal: #14b8a6;
            
            /* Texte */
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --text-inverse: #0f172a;
            
            /* Bordures */
            --border-subtle: rgba(148, 163, 184, 0.1);
            --border-default: rgba(148, 163, 184, 0.2);
            --border-strong: rgba(148, 163, 184, 0.3);
            
            /* Ombres */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            --shadow-glow-blue: 0 0 20px rgba(61, 138, 247, 0.3);
            --shadow-glow-green: 0 0 20px rgba(34, 197, 94, 0.3);
            
            /* Rayons */
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Transitions */
            --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
            --transition-fast: 150ms var(--ease-out);
            --transition-base: 250ms var(--ease-out);
            --transition-slow: 400ms var(--ease-out);
            
            /* Sidebar */
            --sidebar-width: 280px;
            --sidebar-collapsed: 72px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESET & BASE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { 
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LAYOUT â€” Application Shell
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 100;
            transition: width var(--transition-base);
        }

        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }

        .sidebar-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--civic-blue), var(--civic-green));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
            box-shadow: var(--shadow-glow-blue);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .logo-title {
            font-family: 'Archivo', sans-serif;
            font-weight: 800;
            font-size: 0.95rem;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-weight: 500;
            white-space: nowrap;
        }

        .sidebar.collapsed .logo-text { display: none; }

        /* Navigation */
        .nav-section {
            padding: 1rem 0.75rem;
            flex: 1;
            overflow-y: auto;
        }

        .nav-group {
            margin-bottom: 1.5rem;
        }

        .nav-group-title {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .sidebar.collapsed .nav-group-title { display: none; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.7rem 0.75rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
            text-decoration: none;
            position: relative;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(61, 138, 247, 0.15);
            color: var(--civic-blue-light);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 60%;
            background: var(--civic-blue);
            border-radius: 0 2px 2px 0;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .nav-label {
            font-size: 0.85rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
        }

        .sidebar.collapsed .nav-label { display: none; }

        .nav-badge {
            margin-left: auto;
            background: var(--civic-blue);
            color: white;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        .sidebar.collapsed .nav-badge { display: none; }

        /* Sidebar Footer */
        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .storage-indicator {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .storage-bar {
            height: 4px;
            background: var(--bg-primary);
            border-radius: 2px;
            overflow: hidden;
        }

        .storage-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--civic-green), var(--civic-teal));
            border-radius: 2px;
            transition: width var(--transition-base);
        }

        .storage-text {
            font-size: 0.7rem;
            color: var(--text-muted);
            display: flex;
            justify-content: space-between;
        }

        .sidebar.collapsed .storage-indicator { display: none; }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            display: flex;
            flex-direction: column;
            transition: margin-left var(--transition-base);
        }

        .sidebar.collapsed + .main-content {
            margin-left: var(--sidebar-collapsed);
        }

        /* Header */
        .main-header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-subtle);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .toggle-sidebar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-default);
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .toggle-sidebar:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .breadcrumb-item {
            color: var(--text-muted);
        }

        .breadcrumb-item.current {
            color: var(--text-primary);
            font-weight: 600;
        }

        .breadcrumb-sep {
            color: var(--text-muted);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--civic-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--civic-blue-light);
            box-shadow: var(--shadow-glow-blue);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-default);
        }

        .btn-secondary:hover {
            background: var(--bg-elevated);
            border-color: var(--border-strong);
        }

        .btn-success {
            background: var(--civic-green);
            color: white;
        }

        .btn-success:hover {
            background: var(--civic-green-light);
            box-shadow: var(--shadow-glow-green);
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
        }

        .btn-sm {
            padding: 0.35rem 0.75rem;
            font-size: 0.75rem;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }

        /* Page Header */
        .page-header {
            margin-bottom: 1.5rem;
        }

        .page-title {
            font-family: 'Archivo', sans-serif;
            font-size: 1.75rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            margin-bottom: 0.25rem;
        }

        .page-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .card-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-body {
            padding: 1.25rem;
        }

        .card-footer {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-subtle);
            background: var(--bg-secondary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DASHBOARD PAGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            transition: all var(--transition-fast);
        }

        .stat-card:hover {
            border-color: var(--border-default);
            transform: translateY(-2px);
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .stat-icon.blue { background: rgba(61, 138, 247, 0.15); }
        .stat-icon.green { background: rgba(34, 197, 94, 0.15); }
        .stat-icon.amber { background: rgba(245, 158, 11, 0.15); }
        .stat-icon.purple { background: rgba(168, 85, 247, 0.15); }

        .stat-value {
            font-family: 'Archivo', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .stat-trend {
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .stat-trend.up { color: var(--civic-green); }
        .stat-trend.down { color: var(--civic-red); }

        /* Dashboard Sections */
        .dashboard-sections {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RSS FEED DASHBOARD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .rss-dashboard {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 1.5rem;
            height: calc(100vh - 180px);
        }

        /* Feed List Panel */
        .feed-panel {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .feed-search {
            position: relative;
        }

        .feed-search input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.85rem;
            transition: all var(--transition-fast);
        }

        .feed-search input:focus {
            outline: none;
            border-color: var(--civic-blue);
            box-shadow: 0 0 0 3px rgba(61, 138, 247, 0.15);
        }

        .feed-search-icon {
            position: absolute;
            left: 0.875rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .add-feed-form {
            display: flex;
            gap: 0.5rem;
        }

        .add-feed-form input {
            flex: 1;
            padding: 0.6rem 0.875rem;
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.8rem;
        }

        .add-feed-form input:focus {
            outline: none;
            border-color: var(--civic-blue);
        }

        .feed-list {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .feed-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .feed-item:hover {
            border-color: var(--border-default);
            background: var(--bg-tertiary);
        }

        .feed-item.active {
            border-color: var(--civic-blue);
            background: rgba(61, 138, 247, 0.1);
        }

        .feed-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .feed-info {
            flex: 1;
            min-width: 0;
        }

        .feed-name {
            font-weight: 600;
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .feed-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feed-count {
            background: var(--bg-primary);
            color: var(--text-secondary);
            font-size: 0.65rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .feed-actions {
            display: flex;
            gap: 0.25rem;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .feed-item:hover .feed-actions {
            opacity: 1;
        }

        .feed-action-btn {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .feed-action-btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .feed-action-btn.delete:hover {
            color: var(--civic-red);
        }

        /* Articles Panel */
        .articles-panel {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow: hidden;
        }

        .articles-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .articles-title {
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .articles-filters {
            display: flex;
            gap: 0.5rem;
        }

        .filter-btn {
            padding: 0.4rem 0.75rem;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-default);
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .filter-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .filter-btn.active {
            background: var(--civic-blue);
            border-color: var(--civic-blue);
            color: white;
        }

        .articles-list {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .article-card {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .article-card:hover {
            border-color: var(--border-default);
            transform: translateY(-1px);
        }

        .article-card.unread {
            border-left: 3px solid var(--civic-blue);
        }

        .article-thumb {
            width: 120px;
            height: 80px;
            border-radius: var(--radius-sm);
            background: var(--bg-elevated);
            flex-shrink: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        .article-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .article-content {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }

        .article-source {
            font-size: 0.7rem;
            color: var(--civic-blue);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .article-title {
            font-weight: 700;
            font-size: 0.95rem;
            line-height: 1.4;
            margin-bottom: 0.35rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-excerpt {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex: 1;
        }

        .article-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 0.5rem;
        }

        .article-date {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .article-tags {
            display: flex;
            gap: 0.35rem;
        }

        .article-tag {
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: var(--bg-elevated);
            color: var(--text-secondary);
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-muted);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .empty-description {
            font-size: 0.85rem;
            max-width: 300px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PLAIDOYER TOOLS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .tool-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .tool-card:hover {
            border-color: var(--border-default);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .tool-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        .tool-icon-wrapper {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .tool-icon-wrapper.voir { background: rgba(34, 197, 94, 0.15); }
        .tool-icon-wrapper.juger { background: rgba(245, 158, 11, 0.15); }
        .tool-icon-wrapper.agir { background: rgba(168, 85, 247, 0.15); }

        .tool-number {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            background: var(--bg-elevated);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
        }

        .tool-name {
            font-weight: 700;
            font-size: 1rem;
        }

        .tool-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .tool-phase {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            width: fit-content;
        }

        .tool-phase.voir {
            background: rgba(34, 197, 94, 0.15);
            color: var(--civic-green);
        }

        .tool-phase.juger {
            background: rgba(245, 158, 11, 0.15);
            color: var(--civic-amber);
        }

        .tool-phase.agir {
            background: rgba(168, 85, 247, 0.15);
            color: var(--civic-purple);
        }

        /* Tool Editor Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transform: scale(0.95) translateY(20px);
            transition: transform var(--transition-base);
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-subtle);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .form-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.35rem;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--civic-blue);
            box-shadow: 0 0 0 3px rgba(61, 138, 247, 0.15);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.6;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           IMPORT/EXPORT CENTER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .io-center {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .io-section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
        }

        .io-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .drop-zone {
            border: 2px dashed var(--border-default);
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            text-align: center;
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .drop-zone:hover,
        .drop-zone.dragover {
            border-color: var(--civic-blue);
            background: rgba(61, 138, 247, 0.05);
        }

        .drop-zone-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .drop-zone-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .drop-zone-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .format-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .format-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1.25rem;
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            background: var(--bg-tertiary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .format-btn:hover {
            border-color: var(--civic-blue);
            background: rgba(61, 138, 247, 0.1);
        }

        .format-icon {
            font-size: 1.75rem;
        }

        .format-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .format-ext {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: 'IBM Plex Mono', monospace;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PROGRESS TRACKING
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .progress-section {
            margin-bottom: 1.5rem;
        }

        .progress-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .progress-title {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-value {
            font-family: 'IBM Plex Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width var(--transition-slow);
        }

        .progress-fill.voir { background: linear-gradient(90deg, var(--civic-green), var(--civic-teal)); }
        .progress-fill.juger { background: linear-gradient(90deg, var(--civic-amber), var(--civic-amber-light)); }
        .progress-fill.agir { background: linear-gradient(90deg, var(--civic-purple), #c084fc); }
        .progress-fill.overall { background: linear-gradient(90deg, var(--civic-blue), var(--civic-blue-light)); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NOTIFICATIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1.25rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            animation: slideIn 0.3s var(--ease-out);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast.success { border-left: 3px solid var(--civic-green); }
        .toast.error { border-left: 3px solid var(--civic-red); }
        .toast.info { border-left: 3px solid var(--civic-blue); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOADING STATES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-default);
            border-top-color: var(--civic-blue);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE SECTIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .rss-dashboard {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .feed-panel {
                max-height: 400px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .io-center {
                grid-template-columns: 1fr;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACTOR MAPPING
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .actor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .actor-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            padding: 1rem;
            transition: all var(--transition-fast);
        }

        .actor-card:hover {
            border-color: var(--border-default);
        }

        .actor-header {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .actor-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .actor-info {
            flex: 1;
        }

        .actor-name {
            font-weight: 700;
            font-size: 0.95rem;
        }

        .actor-role {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .actor-position {
            display: inline-block;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            margin-top: 0.5rem;
        }

        .actor-position.ally { background: rgba(34, 197, 94, 0.15); color: var(--civic-green); }
        .actor-position.opponent { background: rgba(239, 68, 68, 0.15); color: var(--civic-red); }
        .actor-position.neutral { background: rgba(148, 163, 184, 0.15); color: var(--text-secondary); }
        .actor-position.target { background: rgba(61, 138, 247, 0.15); color: var(--civic-blue); }

        .actor-power {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .power-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .power-dots {
            display: flex;
            gap: 0.25rem;
        }

        .power-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--bg-primary);
        }

        .power-dot.filled {
            background: var(--civic-amber);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIMELINE / JOURNAL
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .timeline {
            position: relative;
            padding-left: 1.5rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-default);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 1.25rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0.25rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--civic-blue);
            border: 2px solid var(--bg-secondary);
        }

        .timeline-date {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: 'IBM Plex Mono', monospace;
            margin-bottom: 0.25rem;
        }

        .timeline-content {
            font-size: 0.85rem;
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">âš–ï¸</div>
                <div class="logo-text">
                    <span class="logo-title">PLAIDOYER CITOYEN</span>
                    <span class="logo-subtitle">Poste de travail v3.0</span>
                </div>
            </div>

            <nav class="nav-section">
                <div class="nav-group">
                    <div class="nav-group-title">Accueil</div>
                    <a class="nav-item active" data-page="dashboard">
                        <span class="nav-icon">ğŸ“Š</span>
                        <span class="nav-label">Tableau de bord</span>
                    </a>
                    <a class="nav-item" data-page="rss">
                        <span class="nav-icon">ğŸ“¡</span>
                        <span class="nav-label">Veille RSS</span>
                        <span class="nav-badge" id="rss-badge">0</span>
                    </a>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">VOIR â€” Analyse</div>
                    <a class="nav-item" data-page="tool-domino">
                        <span class="nav-icon">ğŸ¡</span>
                        <span class="nav-label">Domino du changement</span>
                    </a>
                    <a class="nav-item" data-page="tool-profil">
                        <span class="nav-icon">ğŸ‘¤</span>
                        <span class="nav-label">Profil d'engagement</span>
                    </a>
                    <a class="nav-item" data-page="tool-fleur">
                        <span class="nav-icon">ğŸŒ¸</span>
                        <span class="nav-label">Fleur de pouvoir</span>
                    </a>
                    <a class="nav-item" data-page="tool-acteurs">
                        <span class="nav-icon">ğŸ—ºï¸</span>
                        <span class="nav-label">Cartographie acteurs</span>
                    </a>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">JUGER â€” StratÃ©gie</div>
                    <a class="nav-item" data-page="tool-toc">
                        <span class="nav-icon">ğŸ¯</span>
                        <span class="nav-label">ThÃ©orie du changement</span>
                    </a>
                    <a class="nav-item" data-page="tool-swot">
                        <span class="nav-icon">ğŸ“‹</span>
                        <span class="nav-label">Analyse SWOT</span>
                    </a>
                    <a class="nav-item" data-page="tool-pestel">
                        <span class="nav-icon">ğŸŒ</span>
                        <span class="nav-label">Analyse PESTEL</span>
                    </a>
                    <a class="nav-item" data-page="tool-arbre">
                        <span class="nav-icon">ğŸŒ³</span>
                        <span class="nav-label">Arbre problÃ¨me/objectif</span>
                    </a>
                    <a class="nav-item" data-page="tool-5why">
                        <span class="nav-icon">â“</span>
                        <span class="nav-label">Les 5 Pourquoi</span>
                    </a>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">AGIR â€” Action</div>
                    <a class="nav-item" data-page="tool-pouvoir">
                        <span class="nav-icon">âš¡</span>
                        <span class="nav-label">Avec/sans/contre pouvoir</span>
                    </a>
                    <a class="nav-item" data-page="tool-smart">
                        <span class="nav-icon">ğŸ¯</span>
                        <span class="nav-label">Objectifs SMART</span>
                    </a>
                    <a class="nav-item" data-page="tool-cibles">
                        <span class="nav-icon">ğŸ¤</span>
                        <span class="nav-label">Cibles et alliances</span>
                    </a>
                    <a class="nav-item" data-page="tool-message">
                        <span class="nav-icon">ğŸ’¬</span>
                        <span class="nav-label">Construire un message</span>
                    </a>
                    <a class="nav-item" data-page="tool-checklist">
                        <span class="nav-icon">âœ…</span>
                        <span class="nav-label">Check-list rencontre</span>
                    </a>
                    <a class="nav-item" data-page="tool-suivi">
                        <span class="nav-icon">ğŸ“ˆ</span>
                        <span class="nav-label">Suivi-Ã©valuation</span>
                    </a>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">DonnÃ©es</div>
                    <a class="nav-item" data-page="import-export">
                        <span class="nav-icon">ğŸ’¾</span>
                        <span class="nav-label">Import / Export</span>
                    </a>
                    <a class="nav-item" data-page="journal">
                        <span class="nav-icon">ğŸ““</span>
                        <span class="nav-label">Journal de bord</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="storage-indicator">
                    <div class="storage-bar">
                        <div class="storage-fill" id="storage-fill" style="width: 0%"></div>
                    </div>
                    <div class="storage-text">
                        <span>DonnÃ©es locales</span>
                        <span id="storage-size">0 KB</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="header-left">
                    <button class="toggle-sidebar" id="toggle-sidebar">â˜°</button>
                    <div class="breadcrumb">
                        <span class="breadcrumb-item">Plaidoyer</span>
                        <span class="breadcrumb-sep">â€º</span>
                        <span class="breadcrumb-item current" id="breadcrumb-current">Tableau de bord</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary btn-sm" onclick="saveProject()">
                        <span>ğŸ’¾</span> Sauvegarder
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="showPage('import-export')">
                        <span>ğŸ“¤</span> Exporter
                    </button>
                </div>
            </header>

            <div class="content-area">
                <!-- DASHBOARD PAGE -->
                <section class="page-section active" id="page-dashboard">
                    <div class="page-header">
                        <h1 class="page-title">Tableau de bord</h1>
                        <p class="page-description">Vue d'ensemble de votre projet de plaidoyer citoyen</p>
                    </div>

                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <div class="stat-icon blue">ğŸ“Š</div>
                            <div class="stat-value" id="stat-progress">0%</div>
                            <div class="stat-label">Progression globale</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green">ğŸ—ºï¸</div>
                            <div class="stat-value" id="stat-actors">0</div>
                            <div class="stat-label">Acteurs cartographiÃ©s</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon amber">ğŸ“¡</div>
                            <div class="stat-value" id="stat-feeds">0</div>
                            <div class="stat-label">Flux RSS actifs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon purple">ğŸ“</div>
                            <div class="stat-value" id="stat-journal">0</div>
                            <div class="stat-label">EntrÃ©es journal</div>
                        </div>
                    </div>

                    <!-- Progress Bars -->
                    <div class="card" style="margin-bottom: 1.5rem;">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ“ˆ Progression par phase</h3>
                        </div>
                        <div class="card-body">
                            <div class="progress-section">
                                <div class="progress-header">
                                    <span class="progress-title"><span style="color: var(--civic-green);">â—</span> VOIR â€” Analyse</span>
                                    <span class="progress-value" id="progress-voir">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill voir" id="progress-voir-fill" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="progress-section">
                                <div class="progress-header">
                                    <span class="progress-title"><span style="color: var(--civic-amber);">â—</span> JUGER â€” StratÃ©gie</span>
                                    <span class="progress-value" id="progress-juger">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill juger" id="progress-juger-fill" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="progress-section">
                                <div class="progress-header">
                                    <span class="progress-title"><span style="color: var(--civic-purple);">â—</span> AGIR â€” Action</span>
                                    <span class="progress-value" id="progress-agir">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill agir" id="progress-agir-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">âš¡ Actions rapides</h3>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                                <button class="btn btn-secondary" onclick="showPage('rss')">ğŸ“¡ Surveiller les flux</button>
                                <button class="btn btn-secondary" onclick="showPage('tool-acteurs')">ğŸ—ºï¸ Ajouter un acteur</button>
                                <button class="btn btn-secondary" onclick="showPage('tool-message')">ğŸ’¬ CrÃ©er un message</button>
                                <button class="btn btn-secondary" onclick="showPage('journal')">ğŸ““ Nouvelle entrÃ©e</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- RSS DASHBOARD PAGE -->
                <section class="page-section" id="page-rss">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ“¡ Veille RSS</h1>
                        <p class="page-description">Monitorer vos sources d'information citoyenne en temps rÃ©el</p>
                    </div>

                    <div class="rss-dashboard">
                        <!-- Feed List Panel -->
                        <div class="feed-panel">
                            <div class="card" style="height: 100%; display: flex; flex-direction: column;">
                                <div class="card-header">
                                    <h3 class="card-title">ğŸ“š Flux RSS</h3>
                                    <button class="btn btn-primary btn-sm" onclick="refreshAllFeeds()">ğŸ”„</button>
                                </div>
                                <div class="card-body" style="flex: 1; display: flex; flex-direction: column; gap: 1rem; overflow: hidden;">
                                    <div class="add-feed-form">
                                        <input type="text" id="new-feed-url" placeholder="URL du flux RSS...">
                                        <button class="btn btn-success btn-sm" onclick="addFeed()">+</button>
                                    </div>
                                    
                                    <div class="feed-search">
                                        <span class="feed-search-icon">ğŸ”</span>
                                        <input type="text" id="feed-search" placeholder="Filtrer les flux...">
                                    </div>

                                    <div class="feed-list" id="feed-list">
                                        <!-- Feeds will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Articles Panel -->
                        <div class="articles-panel">
                            <div class="card" style="height: 100%; display: flex; flex-direction: column;">
                                <div class="card-header" style="flex-wrap: wrap; gap: 0.75rem;">
                                    <h3 class="articles-title" id="articles-title">ğŸ“° Tous les articles</h3>
                                    <div class="articles-filters">
                                        <button class="filter-btn active" data-filter="all">Tous</button>
                                        <button class="filter-btn" data-filter="unread">Non lus</button>
                                        <button class="filter-btn" data-filter="starred">Favoris</button>
                                        <button class="filter-btn" data-filter="today">Aujourd'hui</button>
                                    </div>
                                </div>
                                <div class="card-body" style="flex: 1; overflow: hidden;">
                                    <div class="articles-list" id="articles-list">
                                        <div class="empty-state">
                                            <div class="empty-icon">ğŸ“¡</div>
                                            <div class="empty-title">Aucun article</div>
                                            <div class="empty-description">Ajoutez des flux RSS pour commencer votre veille citoyenne</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- IMPORT/EXPORT PAGE -->
                <section class="page-section" id="page-import-export">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ’¾ Import / Export</h1>
                        <p class="page-description">GÃ©rez vos donnÃ©es de plaidoyer dans diffÃ©rents formats</p>
                    </div>

                    <div class="io-center">
                        <div class="io-section">
                            <h3 class="io-title">ğŸ“¥ Importer</h3>
                            <div class="drop-zone" id="drop-zone" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)" onclick="document.getElementById('file-input').click()">
                                <div class="drop-zone-icon">ğŸ“</div>
                                <div class="drop-zone-title">Glissez vos fichiers ici</div>
                                <div class="drop-zone-hint">ou cliquez pour sÃ©lectionner (JSON, CSV, Markdown)</div>
                            </div>
                            <input type="file" id="file-input" accept=".json,.csv,.md,.txt" style="display: none" onchange="handleFileSelect(event)">
                        </div>

                        <div class="io-section">
                            <h3 class="io-title">ğŸ“¤ Exporter</h3>
                            <div class="format-grid">
                                <button class="format-btn" onclick="exportData('json')">
                                    <span class="format-icon">ğŸ“„</span>
                                    <span class="format-name">JSON</span>
                                    <span class="format-ext">.json</span>
                                </button>
                                <button class="format-btn" onclick="exportData('csv')">
                                    <span class="format-icon">ğŸ“Š</span>
                                    <span class="format-name">CSV</span>
                                    <span class="format-ext">.csv</span>
                                </button>
                                <button class="format-btn" onclick="exportData('md')">
                                    <span class="format-icon">ğŸ“</span>
                                    <span class="format-name">Markdown</span>
                                    <span class="format-ext">.md</span>
                                </button>
                                <button class="format-btn" onclick="exportData('html')">
                                    <span class="format-icon">ğŸŒ</span>
                                    <span class="format-name">HTML</span>
                                    <span class="format-ext">.html</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Export Preview -->
                    <div class="card" style="margin-top: 1.5rem;">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ‘ï¸ AperÃ§u des donnÃ©es</h3>
                        </div>
                        <div class="card-body">
                            <pre id="data-preview" style="background: var(--bg-input); padding: 1rem; border-radius: var(--radius-md); overflow-x: auto; font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; max-height: 300px; color: var(--text-secondary);"></pre>
                        </div>
                    </div>
                </section>

                <!-- TOOL PAGES - Domino du changement -->
                <section class="page-section" id="page-tool-domino">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ¡ Domino du changement</h1>
                        <p class="page-description">DÃ©finissez votre vision et les changements que vous souhaitez voir advenir</p>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ¯ Pourquoi voulez-vous vous engager?</label>
                                <textarea class="form-textarea" data-field="domino_pourquoi" placeholder="DÃ©crivez vos motivations profondes..."></textarea>
                                <p class="form-hint">Qu'est-ce qui vous pousse Ã  agir? Quelles sont vos valeurs?</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸŒŸ Quelles sont vos valeurs fondamentales?</label>
                                <textarea class="form-textarea" data-field="domino_valeurs" placeholder="Justice, Ã©quitÃ©, solidaritÃ©..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ”„ Quels changements souhaitez-vous voir?</label>
                                <textarea class="form-textarea" data-field="domino_changements" placeholder="Listez les changements concrets que vous visez..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸŒ Quel monde voulez-vous construire?</label>
                                <textarea class="form-textarea" data-field="domino_vision" placeholder="DÃ©crivez votre vision d'avenir..."></textarea>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-success" onclick="saveProject()">ğŸ’¾ Sauvegarder</button>
                        </div>
                    </div>
                </section>

                <!-- TOOL - Cartographie des acteurs -->
                <section class="page-section" id="page-tool-acteurs">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ—ºï¸ Cartographie des acteurs</h1>
                        <p class="page-description">Identifiez et analysez les parties prenantes de votre plaidoyer</p>
                    </div>

                    <div class="card" style="margin-bottom: 1.5rem;">
                        <div class="card-header">
                            <h3 class="card-title">â• Ajouter un acteur</h3>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">Nom</label>
                                    <input type="text" class="form-input" id="actor-name" placeholder="Nom de l'acteur">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">RÃ´le/Organisation</label>
                                    <input type="text" class="form-input" id="actor-role" placeholder="Fonction, organisation...">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">Position</label>
                                    <select class="form-select" id="actor-position">
                                        <option value="ally">AlliÃ©Â·e</option>
                                        <option value="neutral">Neutre</option>
                                        <option value="opponent">OpposantÂ·e</option>
                                        <option value="target">Cible</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">Pouvoir (1-5)</label>
                                    <select class="form-select" id="actor-power">
                                        <option value="1">1 - Faible</option>
                                        <option value="2">2</option>
                                        <option value="3">3 - Moyen</option>
                                        <option value="4">4</option>
                                        <option value="5">5 - Fort</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="addActor()">â• Ajouter l'acteur</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ‘¥ Acteurs identifiÃ©s</h3>
                            <span id="actors-count" style="color: var(--text-muted); font-size: 0.85rem;">0 acteurs</span>
                        </div>
                        <div class="card-body">
                            <div class="actor-grid" id="actors-grid">
                                <div class="empty-state">
                                    <div class="empty-icon">ğŸ‘¥</div>
                                    <div class="empty-title">Aucun acteur</div>
                                    <div class="empty-description">Commencez par ajouter les parties prenantes de votre plaidoyer</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TOOL - Construire un message -->
                <section class="page-section" id="page-tool-message">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ’¬ Construire un message</h1>
                        <p class="page-description">Ã‰laborez votre message de plaidoyer en 5 composants</p>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ£ 1. Accroche</label>
                                <textarea class="form-textarea" data-field="msg_accroche" placeholder="Une phrase d'accroche percutante qui capte l'attention..."></textarea>
                                <p class="form-hint">Fait marquant, statistique, question rhÃ©torique...</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label">âš ï¸ 2. ProblÃ¨me</label>
                                <textarea class="form-textarea" data-field="msg_probleme" placeholder="Quel est le problÃ¨me que vous voulez rÃ©soudre?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ’¡ 3. Importance</label>
                                <textarea class="form-textarea" data-field="msg_importance" placeholder="Pourquoi est-ce important d'agir maintenant?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ¯ 4. Cible</label>
                                <textarea class="form-textarea" data-field="msg_cible" placeholder="Ã€ qui adressez-vous ce message?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">âœŠ 5. Action demandÃ©e</label>
                                <textarea class="form-textarea" data-field="msg_action" placeholder="Quelle action concrÃ¨te demandez-vous?"></textarea>
                            </div>

                            <button class="btn btn-primary" onclick="generateMessage()">âœ¨ GÃ©nÃ©rer le message complet</button>

                            <div id="generated-message" style="display: none; margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-input); border-radius: var(--radius-md); border-left: 4px solid var(--civic-blue);">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TOOL - SWOT -->
                <section class="page-section" id="page-tool-swot">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ“‹ Analyse SWOT</h1>
                        <p class="page-description">Forces, Faiblesses, OpportunitÃ©s et Menaces de votre projet</p>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <div class="card" style="border-left: 4px solid var(--civic-green);">
                            <div class="card-header">
                                <h3 class="card-title" style="color: var(--civic-green);">ğŸ’ª Forces (S)</h3>
                            </div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="swot_forces" placeholder="Vos atouts, ressources, compÃ©tences..."></textarea>
                            </div>
                        </div>

                        <div class="card" style="border-left: 4px solid var(--civic-red);">
                            <div class="card-header">
                                <h3 class="card-title" style="color: var(--civic-red);">âš¡ Faiblesses (W)</h3>
                            </div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="swot_faiblesses" placeholder="Vos limites, manques, points Ã  amÃ©liorer..."></textarea>
                            </div>
                        </div>

                        <div class="card" style="border-left: 4px solid var(--civic-blue);">
                            <div class="card-header">
                                <h3 class="card-title" style="color: var(--civic-blue);">ğŸŒŸ OpportunitÃ©s (O)</h3>
                            </div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="swot_opportunites" placeholder="Contexte favorable, alliÃ©s potentiels, fenÃªtres d'opportunitÃ©..."></textarea>
                            </div>
                        </div>

                        <div class="card" style="border-left: 4px solid var(--civic-amber);">
                            <div class="card-header">
                                <h3 class="card-title" style="color: var(--civic-amber);">âš ï¸ Menaces (T)</h3>
                            </div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="swot_menaces" placeholder="Risques, oppositions, obstacles potentiels..."></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TOOL - Objectifs SMART -->
                <section class="page-section" id="page-tool-smart">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ¯ Objectifs SMART</h1>
                        <p class="page-description">DÃ©finissez des objectifs SpÃ©cifiques, Mesurables, Atteignables, RÃ©alistes et Temporels</p>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ“Œ S â€” SpÃ©cifique</label>
                                <textarea class="form-textarea" data-field="smart_s" placeholder="Quel est prÃ©cisÃ©ment l'objectif? Quoi, qui, oÃ¹, comment?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ“Š M â€” Mesurable</label>
                                <textarea class="form-textarea" data-field="smart_m" placeholder="Comment mesurerez-vous l'atteinte de l'objectif? Quels indicateurs?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">âœ… A â€” Atteignable</label>
                                <textarea class="form-textarea" data-field="smart_a" placeholder="L'objectif est-il rÃ©aliste avec vos ressources?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ¯ R â€” RÃ©aliste</label>
                                <textarea class="form-textarea" data-field="smart_r" placeholder="L'objectif est-il pertinent par rapport Ã  votre mission?"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">â° T â€” Temporel</label>
                                <textarea class="form-textarea" data-field="smart_t" placeholder="Quelle est l'Ã©chÃ©ance? Quelles Ã©tapes intermÃ©diaires?"></textarea>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-success" onclick="saveProject()">ğŸ’¾ Sauvegarder</button>
                        </div>
                    </div>
                </section>

                <!-- JOURNAL PAGE -->
                <section class="page-section" id="page-journal">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ““ Journal de bord</h1>
                        <p class="page-description">Documentez vos actions, rencontres et rÃ©flexions</p>
                    </div>

                    <div class="card" style="margin-bottom: 1.5rem;">
                        <div class="card-header">
                            <h3 class="card-title">âœï¸ Nouvelle entrÃ©e</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <textarea class="form-textarea" id="journal-input" placeholder="Notez vos actions, rencontres, rÃ©flexions du jour..."></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="addJournalEntry()">â• Ajouter l'entrÃ©e</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ“… Historique</h3>
                        </div>
                        <div class="card-body">
                            <div class="timeline" id="journal-timeline">
                                <div class="empty-state">
                                    <div class="empty-icon">ğŸ““</div>
                                    <div class="empty-title">Journal vide</div>
                                    <div class="empty-description">Commencez Ã  documenter votre parcours de plaidoyer</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Generic Tool Pages (placeholders for other tools) -->
                <section class="page-section" id="page-tool-profil">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ‘¤ Profil d'engagement</h1>
                        <p class="page-description">Identifiez votre style et vos forces en tant que citoyenÂ·ne engagÃ©Â·e</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Comment prÃ©fÃ©rez-vous agir?</label>
                                <select class="form-select" data-field="profil_q1">
                                    <option value="">SÃ©lectionnez...</option>
                                    <option value="a">En planifiant et organisant</option>
                                    <option value="b">En communiquant et mobilisant</option>
                                    <option value="c">En analysant et recherchant</option>
                                    <option value="d">En crÃ©ant et innovant</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Quelle est votre plus grande force?</label>
                                <textarea class="form-textarea" data-field="profil_force" placeholder="DÃ©crivez ce que vous faites le mieux..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Quels sont vos domaines d'expertise?</label>
                                <textarea class="form-textarea" data-field="profil_expertise" placeholder="ThÃ¨mes, compÃ©tences, expÃ©riences..."></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-fleur">
                    <div class="page-header">
                        <h1 class="page-title">ğŸŒ¸ Fleur de pouvoir</h1>
                        <p class="page-description">Analysez vos privilÃ¨ges et identitÃ©s pour mieux comprendre votre position</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Genre et identitÃ©</label>
                                <textarea class="form-textarea" data-field="fleur_genre" placeholder="Comment votre genre influence-t-il votre engagement?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Origine et culture</label>
                                <textarea class="form-textarea" data-field="fleur_origine" placeholder="Comment votre background culturel influence-t-il votre perspective?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Position socio-Ã©conomique</label>
                                <textarea class="form-textarea" data-field="fleur_socio" placeholder="Comment votre position sociale affecte-t-elle votre accÃ¨s au pouvoir?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Ã‰ducation et savoirs</label>
                                <textarea class="form-textarea" data-field="fleur_education" placeholder="Quels savoirs et diplÃ´mes avez-vous? Comment cela vous positionne?"></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-toc">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ¯ ThÃ©orie du changement</h1>
                        <p class="page-description">DÃ©finissez comment vos actions mÃ¨neront au changement souhaitÃ©</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Vision Ã  long terme</label>
                                <textarea class="form-textarea" data-field="toc_vision" placeholder="Quel est l'impact ultime que vous souhaitez voir?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Changements intermÃ©diaires</label>
                                <textarea class="form-textarea" data-field="toc_intermediaires" placeholder="Quels changements doivent se produire pour atteindre votre vision?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ActivitÃ©s et stratÃ©gies</label>
                                <textarea class="form-textarea" data-field="toc_activites" placeholder="Quelles actions allez-vous mener?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">HypothÃ¨ses</label>
                                <textarea class="form-textarea" data-field="toc_hypotheses" placeholder="Quelles hypothÃ¨ses sous-tendent votre thÃ©orie?"></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-pestel">
                    <div class="page-header">
                        <h1 class="page-title">ğŸŒ Analyse PESTEL</h1>
                        <p class="page-description">Analysez le contexte macro-environnemental de votre plaidoyer</p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <div class="card"><div class="card-header"><h3 class="card-title">ğŸ›ï¸ Politique</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_p" placeholder="Contexte politique, gouvernance, lÃ©gislation..."></textarea></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">ğŸ’° Ã‰conomique</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_e" placeholder="Contexte Ã©conomique, budgets, financements..."></textarea></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">ğŸ‘¥ Social</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_s" placeholder="Tendances sociales, dÃ©mographie, opinions..."></textarea></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">ğŸ’» Technologique</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_t" placeholder="Innovations, outils numÃ©riques, mÃ©dias..."></textarea></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">ğŸŒ± Environnemental</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_env" placeholder="Enjeux Ã©cologiques, climat, ressources..."></textarea></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">âš–ï¸ LÃ©gal</h3></div><div class="card-body"><textarea class="form-textarea" data-field="pestel_l" placeholder="Cadre juridique, rÃ©glementations, droits..."></textarea></div></div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-arbre">
                    <div class="page-header">
                        <h1 class="page-title">ğŸŒ³ Arbre problÃ¨me/objectif</h1>
                        <p class="page-description">Analysez les causes et consÃ©quences du problÃ¨me, puis dÃ©finissez les objectifs</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ”´ ProblÃ¨me central</label>
                                <textarea class="form-textarea" data-field="arbre_probleme" placeholder="Quel est le problÃ¨me principal que vous voulez rÃ©soudre?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ”½ Causes (racines)</label>
                                <textarea class="form-textarea" data-field="arbre_causes" placeholder="Quelles sont les causes profondes de ce problÃ¨me?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ”¼ ConsÃ©quences (branches)</label>
                                <textarea class="form-textarea" data-field="arbre_consequences" placeholder="Quelles sont les consÃ©quences si le problÃ¨me persiste?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸŸ¢ Objectif central</label>
                                <textarea class="form-textarea" data-field="arbre_objectif" placeholder="Transformez le problÃ¨me en objectif positif"></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-5why">
                    <div class="page-header">
                        <h1 class="page-title">â“ Les 5 Pourquoi</h1>
                        <p class="page-description">Remontez aux causes profondes d'un problÃ¨me</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ProblÃ¨me initial</label>
                                <textarea class="form-textarea" data-field="why_probleme" placeholder="Quel est le problÃ¨me observÃ©?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">1. Pourquoi?</label>
                                <textarea class="form-textarea" data-field="why_1" placeholder="PremiÃ¨re raison..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">2. Pourquoi?</label>
                                <textarea class="form-textarea" data-field="why_2" placeholder="DeuxiÃ¨me raison..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">3. Pourquoi?</label>
                                <textarea class="form-textarea" data-field="why_3" placeholder="TroisiÃ¨me raison..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">4. Pourquoi?</label>
                                <textarea class="form-textarea" data-field="why_4" placeholder="QuatriÃ¨me raison..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">5. Pourquoi?</label>
                                <textarea class="form-textarea" data-field="why_5" placeholder="Cause racine identifiÃ©e..."></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-pouvoir">
                    <div class="page-header">
                        <h1 class="page-title">âš¡ Avec/sans/contre le pouvoir</h1>
                        <p class="page-description">DÃ©finissez votre positionnement par rapport aux institutions</p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                        <div class="card" style="border-top: 4px solid var(--civic-green);">
                            <div class="card-header"><h3 class="card-title" style="color: var(--civic-green);">ğŸ¤ AVEC le pouvoir</h3></div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="pouvoir_avec" placeholder="Collaboration, dialogue, participation aux instances officielles..."></textarea>
                                <p class="form-hint" style="margin-top: 0.5rem;">Lobbying, auditions, commissions consultatives</p>
                            </div>
                        </div>
                        <div class="card" style="border-top: 4px solid var(--civic-amber);">
                            <div class="card-header"><h3 class="card-title" style="color: var(--civic-amber);">ğŸ”„ SANS le pouvoir</h3></div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="pouvoir_sans" placeholder="Actions autonomes, alternatives, construction d'espaces propres..."></textarea>
                                <p class="form-hint" style="margin-top: 0.5rem;">Projets pilotes, mÃ©dias alternatifs, Ã©conomie sociale</p>
                            </div>
                        </div>
                        <div class="card" style="border-top: 4px solid var(--civic-red);">
                            <div class="card-header"><h3 class="card-title" style="color: var(--civic-red);">âœŠ CONTRE le pouvoir</h3></div>
                            <div class="card-body">
                                <textarea class="form-textarea" data-field="pouvoir_contre" placeholder="Opposition, contestation, mobilisation de masse..."></textarea>
                                <p class="form-hint" style="margin-top: 0.5rem;">Manifestations, pÃ©titions, dÃ©sobÃ©issance civile</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-cibles">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ¤ Cibles et alliances</h1>
                        <p class="page-description">Identifiez vos cibles prioritaires et vos alliÃ©s potentiels</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ¯ Cible principale</label>
                                <textarea class="form-textarea" data-field="cible_principale" placeholder="Qui a le pouvoir de dÃ©cision sur votre problÃ©matique?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ¯ Cibles secondaires</label>
                                <textarea class="form-textarea" data-field="cibles_secondaires" placeholder="Qui peut influencer la cible principale?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ¤ AlliÃ©s existants</label>
                                <textarea class="form-textarea" data-field="allies_existants" placeholder="Avec qui travaillez-vous dÃ©jÃ ?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ” AlliÃ©s potentiels</label>
                                <textarea class="form-textarea" data-field="allies_potentiels" placeholder="Qui pourrait vous rejoindre?"></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-checklist">
                    <div class="page-header">
                        <h1 class="page-title">âœ… Check-list rencontre</h1>
                        <p class="page-description">PrÃ©parez vos rencontres de plaidoyer</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ“‹ Objectifs de la rencontre</label>
                                <textarea class="form-textarea" data-field="check_objectifs" placeholder="Que voulez-vous obtenir de cette rencontre?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ“š PrÃ©paration du dossier</label>
                                <textarea class="form-textarea" data-field="check_dossier" placeholder="Documents, donnÃ©es, arguments clÃ©s..."></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">â“ Questions anticipÃ©es</label>
                                <textarea class="form-textarea" data-field="check_questions" placeholder="Quelles objections pourriez-vous rencontrer?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ“ Suivi post-rencontre</label>
                                <textarea class="form-textarea" data-field="check_suivi" placeholder="Actions de suivi prÃ©vues..."></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="page-section" id="page-tool-suivi">
                    <div class="page-header">
                        <h1 class="page-title">ğŸ“ˆ Suivi et Ã©valuation</h1>
                        <p class="page-description">Mesurez l'impact de vos actions de plaidoyer</p>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ğŸ“Š Indicateurs de rÃ©sultat</label>
                                <textarea class="form-textarea" data-field="suivi_indicateurs" placeholder="Comment mesurerez-vous votre succÃ¨s?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">âœ… RÃ©sultats obtenus</label>
                                <textarea class="form-textarea" data-field="suivi_resultats" placeholder="Qu'avez-vous accompli jusqu'ici?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ“ LeÃ§ons apprises</label>
                                <textarea class="form-textarea" data-field="suivi_lecons" placeholder="Qu'avez-vous appris? Que feriez-vous diffÃ©remment?"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ğŸ”„ Ajustements Ã  faire</label>
                                <textarea class="form-textarea" data-field="suivi_ajustements" placeholder="Quels changements apporter Ã  votre stratÃ©gie?"></textarea>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Article Modal -->
    <div class="modal-overlay" id="article-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-article-title">Titre de l'article</h3>
                <button class="modal-close" onclick="closeModal('article-modal')">âœ•</button>
            </div>
            <div class="modal-body" id="modal-article-body">
                <!-- Article content -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('article-modal')">Fermer</button>
                <a class="btn btn-primary" id="modal-article-link" href="#" target="_blank">Ouvrir l'original</a>
            </div>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // APPLICATION STATE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let appState = {
            meta: {
                created: new Date().toISOString(),
                updated: new Date().toISOString(),
                version: '3.0'
            },
            fields: {},
            actors: [],
            feeds: [],
            articles: [],
            journal: [],
            settings: {
                theme: 'dark',
                autoSave: true
            }
        };

        // Sample RSS Feeds for civic engagement
        const sampleFeeds = [
            { id: 'f1', name: 'Le Monde - Politique', url: 'https://www.lemonde.fr/politique/rss_full.xml', icon: 'ğŸ‡«ğŸ‡·', category: 'politique' },
            { id: 'f2', name: 'RTBF Info', url: 'https://rss.rtbf.be/article/rss/rtbfinfo_homepage.xml', icon: 'ğŸ‡§ğŸ‡ª', category: 'actualitÃ©' },
            { id: 'f3', name: 'Amnesty International', url: 'https://www.amnesty.org/en/latest/news/feed/', icon: 'âœŠ', category: 'droits humains' },
            { id: 'f4', name: 'Reporterre', url: 'https://reporterre.net/spip.php?page=backend', icon: 'ğŸŒ¿', category: 'environnement' }
        ];

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALIZATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.addEventListener('DOMContentLoaded', () => {
            loadState();
            initNavigation();
            initFormFields();
            initRSSFeeds();
            updateStats();
            updateDataPreview();
            
            // Auto-save every 30 seconds
            setInterval(() => {
                if (appState.settings.autoSave) {
                    saveState(false);
                }
            }, 30000);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveProject();
                }
            });
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // NAVIGATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function initNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const page = item.dataset.page;
                    if (page) showPage(page);
                });
            });

            // Toggle sidebar
            document.getElementById('toggle-sidebar').addEventListener('click', () => {
                document.getElementById('sidebar').classList.toggle('collapsed');
            });
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            
            // Show target page
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            // Update nav
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItem = document.querySelector(`[data-page="${pageId}"]`);
            if (navItem) {
                navItem.classList.add('active');
            }

            // Update breadcrumb
            const breadcrumb = document.getElementById('breadcrumb-current');
            const label = navItem?.querySelector('.nav-label')?.textContent || pageId;
            breadcrumb.textContent = label;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // FORM FIELDS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function initFormFields() {
            const fields = document.querySelectorAll('[data-field]');
            fields.forEach(field => {
                const key = field.dataset.field;
                
                // Load saved value
                if (appState.fields[key]) {
                    field.value = appState.fields[key];
                }

                // Save on change
                field.addEventListener('input', debounce(() => {
                    appState.fields[key] = field.value;
                    updateStats();
                    updateDataPreview();
                }, 500));
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // RSS FEEDS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function initRSSFeeds() {
            if (appState.feeds.length === 0) {
                appState.feeds = [...sampleFeeds];
            }
            renderFeeds();
            renderArticles();
            
            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    filterArticles(btn.dataset.filter);
                });
            });

            // Feed search
            document.getElementById('feed-search').addEventListener('input', (e) => {
                filterFeeds(e.target.value);
            });
        }

        function renderFeeds() {
            const container = document.getElementById('feed-list');
            if (appState.feeds.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“¡</div>
                        <div class="empty-title">Aucun flux</div>
                        <div class="empty-description">Ajoutez des flux RSS pour commencer</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = appState.feeds.map(feed => `
                <div class="feed-item" data-feed-id="${feed.id}" onclick="selectFeed('${feed.id}')">
                    <div class="feed-icon">${feed.icon || 'ğŸ“°'}</div>
                    <div class="feed-info">
                        <div class="feed-name">${feed.name}</div>
                        <div class="feed-meta">
                            <span>${feed.category || 'Non catÃ©gorisÃ©'}</span>
                        </div>
                    </div>
                    <span class="feed-count">${appState.articles.filter(a => a.feedId === feed.id).length}</span>
                    <div class="feed-actions">
                        <button class="feed-action-btn" onclick="event.stopPropagation(); refreshFeed('${feed.id}')" title="RafraÃ®chir">ğŸ”„</button>
                        <button class="feed-action-btn delete" onclick="event.stopPropagation(); deleteFeed('${feed.id}')" title="Supprimer">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');

            document.getElementById('stat-feeds').textContent = appState.feeds.length;
            document.getElementById('rss-badge').textContent = appState.articles.filter(a => !a.read).length;
        }

        function addFeed() {
            const urlInput = document.getElementById('new-feed-url');
            const url = urlInput.value.trim();
            
            if (!url) {
                showToast('Veuillez entrer une URL', 'error');
                return;
            }

            const newFeed = {
                id: 'f' + Date.now(),
                name: url.split('/')[2] || 'Nouveau flux',
                url: url,
                icon: 'ğŸ“°',
                category: 'personnalisÃ©'
            };

            appState.feeds.push(newFeed);
            urlInput.value = '';
            renderFeeds();
            saveState();
            showToast('Flux ajoutÃ© avec succÃ¨s');
            
            // Try to fetch the feed
            fetchFeed(newFeed);
        }

        function deleteFeed(feedId) {
            appState.feeds = appState.feeds.filter(f => f.id !== feedId);
            appState.articles = appState.articles.filter(a => a.feedId !== feedId);
            renderFeeds();
            renderArticles();
            saveState();
            showToast('Flux supprimÃ©');
        }

        function selectFeed(feedId) {
            document.querySelectorAll('.feed-item').forEach(f => f.classList.remove('active'));
            const feedEl = document.querySelector(`[data-feed-id="${feedId}"]`);
            if (feedEl) feedEl.classList.add('active');
            
            const feed = appState.feeds.find(f => f.id === feedId);
            document.getElementById('articles-title').textContent = `ğŸ“° ${feed?.name || 'Articles'}`;
            
            filterArticles('all', feedId);
        }

        async function fetchFeed(feed) {
            try {
                // Using a CORS proxy for demo purposes
                const proxyUrl = 'https://api.allorigins.win/get?url=';
                const response = await fetch(proxyUrl + encodeURIComponent(feed.url));
                const data = await response.json();
                
                if (data.contents) {
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(data.contents, 'text/xml');
                    const items = xml.querySelectorAll('item, entry');
                    
                    items.forEach((item, index) => {
                        if (index < 20) { // Limit to 20 items per feed
                            const title = item.querySelector('title')?.textContent || 'Sans titre';
                            const link = item.querySelector('link')?.textContent || item.querySelector('link')?.getAttribute('href') || '#';
                            const description = item.querySelector('description, summary, content')?.textContent || '';
                            const pubDate = item.querySelector('pubDate, published, updated')?.textContent || new Date().toISOString();
                            
                            // Check if article already exists
                            const exists = appState.articles.some(a => a.link === link);
                            if (!exists) {
                                appState.articles.push({
                                    id: 'a' + Date.now() + index,
                                    feedId: feed.id,
                                    title: title,
                                    link: link,
                                    excerpt: stripHtml(description).substring(0, 200),
                                    date: new Date(pubDate).toISOString(),
                                    read: false,
                                    starred: false
                                });
                            }
                        }
                    });
                    
                    // Sort by date
                    appState.articles.sort((a, b) => new Date(b.date) - new Date(a.date));
                    renderArticles();
                    renderFeeds();
                    saveState();
                }
            } catch (error) {
                console.log('Feed fetch error (CORS):', error.message);
                // Generate demo articles for the feed
                generateDemoArticles(feed);
            }
        }

        function generateDemoArticles(feed) {
            const demoTitles = [
                "Nouvelle initiative citoyenne pour la transparence dÃ©mocratique",
                "Les enjeux de la participation citoyenne en 2025",
                "Comment le plaidoyer citoyen transforme les politiques publiques",
                "Mobilisation rÃ©ussie : retour sur une campagne efficace",
                "Guide pratique : organiser une consultation citoyenne"
            ];

            demoTitles.forEach((title, i) => {
                const exists = appState.articles.some(a => a.title === title && a.feedId === feed.id);
                if (!exists) {
                    appState.articles.push({
                        id: 'demo' + Date.now() + i,
                        feedId: feed.id,
                        title: title,
                        link: '#',
                        excerpt: "Cet article explore les diffÃ©rentes facettes de l'engagement citoyen et propose des pistes concrÃ¨tes pour amplifier l'impact des actions de plaidoyer...",
                        date: new Date(Date.now() - i * 3600000).toISOString(),
                        read: false,
                        starred: false
                    });
                }
            });

            renderArticles();
            renderFeeds();
        }

        function refreshFeed(feedId) {
            const feed = appState.feeds.find(f => f.id === feedId);
            if (feed) {
                showToast('RafraÃ®chissement en cours...');
                fetchFeed(feed);
            }
        }

        function refreshAllFeeds() {
            showToast('RafraÃ®chissement de tous les flux...');
            appState.feeds.forEach(feed => fetchFeed(feed));
        }

        function renderArticles(articles = appState.articles) {
            const container = document.getElementById('articles-list');
            
            if (articles.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“°</div>
                        <div class="empty-title">Aucun article</div>
                        <div class="empty-description">Les articles de vos flux apparaÃ®tront ici</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = articles.slice(0, 50).map(article => {
                const feed = appState.feeds.find(f => f.id === article.feedId);
                const date = new Date(article.date);
                const formattedDate = date.toLocaleDateString('fr-FR', { 
                    day: 'numeric', 
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                return `
                    <article class="article-card ${article.read ? '' : 'unread'}" onclick="openArticle('${article.id}')">
                        <div class="article-thumb">${feed?.icon || 'ğŸ“°'}</div>
                        <div class="article-content">
                            <div class="article-source">${feed?.name || 'Source inconnue'}</div>
                            <h4 class="article-title">${article.title}</h4>
                            <p class="article-excerpt">${article.excerpt}</p>
                            <div class="article-footer">
                                <span class="article-date">${formattedDate}</span>
                                <div class="article-tags">
                                    ${article.starred ? '<span class="article-tag">â­ Favori</span>' : ''}
                                </div>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');

            document.getElementById('rss-badge').textContent = appState.articles.filter(a => !a.read).length;
        }

        function filterArticles(filter, feedId = null) {
            let filtered = [...appState.articles];
            
            if (feedId) {
                filtered = filtered.filter(a => a.feedId === feedId);
            }

            switch (filter) {
                case 'unread':
                    filtered = filtered.filter(a => !a.read);
                    break;
                case 'starred':
                    filtered = filtered.filter(a => a.starred);
                    break;
                case 'today':
                    const today = new Date().toDateString();
                    filtered = filtered.filter(a => new Date(a.date).toDateString() === today);
                    break;
            }

            renderArticles(filtered);
        }

        function filterFeeds(query) {
            const items = document.querySelectorAll('.feed-item');
            items.forEach(item => {
                const name = item.querySelector('.feed-name').textContent.toLowerCase();
                item.style.display = name.includes(query.toLowerCase()) ? 'flex' : 'none';
            });
        }

        function openArticle(articleId) {
            const article = appState.articles.find(a => a.id === articleId);
            if (!article) return;

            article.read = true;
            
            document.getElementById('modal-article-title').textContent = article.title;
            document.getElementById('modal-article-body').innerHTML = `
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">${article.excerpt}</p>
                <p style="font-size: 0.85rem; color: var(--text-muted);">
                    PubliÃ© le ${new Date(article.date).toLocaleDateString('fr-FR', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })}
                </p>
            `;
            document.getElementById('modal-article-link').href = article.link;
            
            openModal('article-modal');
            renderArticles();
            saveState();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ACTORS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function addActor() {
            const name = document.getElementById('actor-name').value.trim();
            const role = document.getElementById('actor-role').value.trim();
            const position = document.getElementById('actor-position').value;
            const power = parseInt(document.getElementById('actor-power').value);

            if (!name) {
                showToast('Veuillez entrer un nom', 'error');
                return;
            }

            const actor = {
                id: 'actor' + Date.now(),
                name,
                role,
                position,
                power
            };

            appState.actors.push(actor);
            renderActors();
            updateStats();
            saveState();
            
            // Clear form
            document.getElementById('actor-name').value = '';
            document.getElementById('actor-role').value = '';
            
            showToast('Acteur ajoutÃ©');
        }

        function renderActors() {
            const container = document.getElementById('actors-grid');
            const countEl = document.getElementById('actors-count');
            
            if (appState.actors.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-icon">ğŸ‘¥</div>
                        <div class="empty-title">Aucun acteur</div>
                        <div class="empty-description">Commencez par ajouter les parties prenantes</div>
                    </div>
                `;
                countEl.textContent = '0 acteurs';
                return;
            }

            const positionLabels = {
                ally: 'AlliÃ©Â·e',
                neutral: 'Neutre',
                opponent: 'OpposantÂ·e',
                target: 'Cible'
            };

            container.innerHTML = appState.actors.map(actor => `
                <div class="actor-card">
                    <div class="actor-header">
                        <div class="actor-avatar">ğŸ‘¤</div>
                        <div class="actor-info">
                            <div class="actor-name">${actor.name}</div>
                            <div class="actor-role">${actor.role || 'Non spÃ©cifiÃ©'}</div>
                        </div>
                        <button class="feed-action-btn delete" onclick="deleteActor('${actor.id}')" title="Supprimer">ğŸ—‘ï¸</button>
                    </div>
                    <span class="actor-position ${actor.position}">${positionLabels[actor.position]}</span>
                    <div class="actor-power">
                        <span class="power-label">Pouvoir:</span>
                        <div class="power-dots">
                            ${[1,2,3,4,5].map(i => `<div class="power-dot ${i <= actor.power ? 'filled' : ''}"></div>`).join('')}
                        </div>
                    </div>
                </div>
            `).join('');

            countEl.textContent = `${appState.actors.length} acteur${appState.actors.length > 1 ? 's' : ''}`;
        }

        function deleteActor(actorId) {
            appState.actors = appState.actors.filter(a => a.id !== actorId);
            renderActors();
            updateStats();
            saveState();
            showToast('Acteur supprimÃ©');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // JOURNAL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function addJournalEntry() {
            const input = document.getElementById('journal-input');
            const text = input.value.trim();

            if (!text) {
                showToast('Veuillez Ã©crire quelque chose', 'error');
                return;
            }

            const entry = {
                id: 'j' + Date.now(),
                text,
                date: new Date().toISOString()
            };

            appState.journal.unshift(entry);
            input.value = '';
            renderJournal();
            updateStats();
            saveState();
            showToast('EntrÃ©e ajoutÃ©e');
        }

        function renderJournal() {
            const container = document.getElementById('journal-timeline');
            
            if (appState.journal.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ““</div>
                        <div class="empty-title">Journal vide</div>
                        <div class="empty-description">Commencez Ã  documenter votre parcours</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = appState.journal.map(entry => {
                const date = new Date(entry.date);
                const formattedDate = date.toLocaleDateString('fr-FR', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                return `
                    <div class="timeline-item">
                        <div class="timeline-date">${formattedDate}</div>
                        <div class="timeline-content">${entry.text}</div>
                    </div>
                `;
            }).join('');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MESSAGE GENERATOR
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function generateMessage() {
            const f = appState.fields;
            const parts = [];

            if (f.msg_accroche) parts.push(f.msg_accroche);
            if (f.msg_probleme) parts.push(`\n\n${f.msg_probleme}`);
            if (f.msg_importance) parts.push(`\n\nPourquoi c'est important : ${f.msg_importance}`);
            if (f.msg_cible && f.msg_action) {
                parts.push(`\n\nNous demandons Ã  ${f.msg_cible} de ${f.msg_action}.`);
            }

            const message = parts.join('') || 'Veuillez remplir les champs ci-dessus pour gÃ©nÃ©rer votre message.';
            
            const container = document.getElementById('generated-message');
            container.style.display = 'block';
            container.innerHTML = `
                <h4 style="margin-bottom: 1rem; color: var(--civic-blue);">ğŸ“ Message gÃ©nÃ©rÃ©</h4>
                <p style="white-space: pre-wrap; line-height: 1.8;">${message}</p>
                <button class="btn btn-secondary btn-sm" style="margin-top: 1rem;" onclick="copyMessage()">ğŸ“‹ Copier</button>
            `;
        }

        function copyMessage() {
            const text = document.getElementById('generated-message').querySelector('p').textContent;
            navigator.clipboard.writeText(text).then(() => {
                showToast('Message copiÃ© !');
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // IMPORT / EXPORT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function handleDragOver(e) {
            e.preventDefault();
            e.target.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file) processFile(file);
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) processFile(file);
        }

        function processFile(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    if (file.name.endsWith('.json')) {
                        const data = JSON.parse(e.target.result);
                        appState = { ...appState, ...data };
                        initFormFields();
                        renderActors();
                        renderJournal();
                        renderFeeds();
                        updateStats();
                        saveState();
                        showToast('DonnÃ©es importÃ©es avec succÃ¨s');
                    } else if (file.name.endsWith('.csv')) {
                        showToast('Import CSV en cours de dÃ©veloppement', 'info');
                    } else {
                        showToast('Format non supportÃ©', 'error');
                    }
                } catch (err) {
                    showToast('Erreur lors de l\'import', 'error');
                    console.error(err);
                }
            };
            reader.readAsText(file);
        }

        function exportData(format) {
            const filename = `plaidoyer_${new Date().toISOString().slice(0, 10)}`;
            let content, type, ext;

            switch (format) {
                case 'json':
                    content = JSON.stringify(appState, null, 2);
                    type = 'application/json';
                    ext = 'json';
                    break;

                case 'csv':
                    const rows = [['Champ', 'Valeur']];
                    Object.entries(appState.fields).forEach(([k, v]) => {
                        if (v) rows.push([k, `"${v.replace(/"/g, '""')}"`]);
                    });
                    content = rows.map(r => r.join(',')).join('\n');
                    type = 'text/csv';
                    ext = 'csv';
                    break;

                case 'md':
                    content = `# Projet de Plaidoyer Citoyen\n\n`;
                    content += `*ExportÃ© le ${new Date().toLocaleDateString('fr-FR')}*\n\n`;
                    content += `---\n\n`;
                    
                    // Group by phase
                    const phases = {
                        'VOIR â€” Analyse': ['domino_', 'fleur_', 'profil_'],
                        'JUGER â€” StratÃ©gie': ['toc_', 'swot_', 'pestel_', 'arbre_', 'why_'],
                        'AGIR â€” Action': ['smart_', 'msg_', 'cible', 'pouvoir_', 'check_', 'suivi_']
                    };

                    Object.entries(phases).forEach(([phase, prefixes]) => {
                        const phaseFields = Object.entries(appState.fields).filter(([k, v]) => 
                            v && prefixes.some(p => k.startsWith(p))
                        );
                        
                        if (phaseFields.length > 0) {
                            content += `## ${phase}\n\n`;
                            phaseFields.forEach(([k, v]) => {
                                content += `### ${k.replace(/_/g, ' ')}\n\n${v}\n\n`;
                            });
                        }
                    });

                    // Actors
                    if (appState.actors.length > 0) {
                        content += `## Acteurs cartographiÃ©s\n\n`;
                        appState.actors.forEach(a => {
                            content += `- **${a.name}** (${a.role}) â€” ${a.position}, Pouvoir: ${a.power}/5\n`;
                        });
                        content += '\n';
                    }

                    type = 'text/markdown';
                    ext = 'md';
                    break;

                case 'html':
                    content = generateHTMLExport();
                    type = 'text/html';
                    ext = 'html';
                    break;
            }

            downloadFile(content, `${filename}.${ext}`, type);
            showToast(`Export ${format.toUpperCase()} rÃ©ussi`);
        }

        function generateHTMLExport() {
            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet de Plaidoyer Citoyen</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 900px; margin: 0 auto; padding: 2rem; background: #f8fafc; color: #1e293b; }
        h1 { color: #3d8af7; border-bottom: 3px solid #3d8af7; padding-bottom: 0.5rem; }
        h2 { color: #22c55e; margin-top: 2rem; }
        h3 { color: #64748b; margin-top: 1rem; }
        .field { background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .actor { display: inline-block; background: #e0f2fe; padding: 0.5rem 1rem; border-radius: 20px; margin: 0.25rem; }
        .meta { color: #94a3b8; font-size: 0.85rem; }
    </style>
</head>
<body>
    <h1>âš–ï¸ Projet de Plaidoyer Citoyen</h1>
    <p class="meta">ExportÃ© le ${new Date().toLocaleDateString('fr-FR')}</p>
    
    ${Object.entries(appState.fields).filter(([k, v]) => v).map(([k, v]) => `
        <div class="field">
            <h3>${k.replace(/_/g, ' ')}</h3>
            <p>${v}</p>
        </div>
    `).join('')}
    
    ${appState.actors.length > 0 ? `
        <h2>ğŸ‘¥ Acteurs cartographiÃ©s</h2>
        ${appState.actors.map(a => `<span class="actor">${a.name}</span>`).join('')}
    ` : ''}
</body>
</html>`;
        }

        function downloadFile(content, filename, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        function updateDataPreview() {
            const preview = document.getElementById('data-preview');
            if (preview) {
                const summary = {
                    fields: Object.keys(appState.fields).filter(k => appState.fields[k]).length,
                    actors: appState.actors.length,
                    feeds: appState.feeds.length,
                    articles: appState.articles.length,
                    journal: appState.journal.length
                };
                preview.textContent = JSON.stringify(summary, null, 2);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STATISTICS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateStats() {
            const filledFields = Object.values(appState.fields).filter(v => v && v.trim()).length;
            const totalFields = 40; // Approximate total fields
            const progress = Math.min(100, Math.round(filledFields / totalFields * 100));

            document.getElementById('stat-progress').textContent = progress + '%';
            document.getElementById('stat-actors').textContent = appState.actors.length;
            document.getElementById('stat-feeds').textContent = appState.feeds.length;
            document.getElementById('stat-journal').textContent = appState.journal.length;

            // Phase progress
            const voirFields = ['domino_pourquoi', 'domino_valeurs', 'domino_changements', 'domino_vision', 'fleur_genre', 'profil_q1'];
            const jugerFields = ['toc_vision', 'swot_forces', 'pestel_p', 'arbre_probleme', 'why_1'];
            const agirFields = ['smart_s', 'msg_accroche', 'cible_principale', 'pouvoir_avec'];

            const calcPhaseProgress = (fields) => {
                const filled = fields.filter(f => appState.fields[f] && appState.fields[f].trim()).length;
                return Math.round(filled / fields.length * 100);
            };

            const voirProgress = calcPhaseProgress(voirFields);
            const jugerProgress = calcPhaseProgress(jugerFields);
            const agirProgress = calcPhaseProgress(agirFields);

            document.getElementById('progress-voir').textContent = voirProgress + '%';
            document.getElementById('progress-voir-fill').style.width = voirProgress + '%';
            
            document.getElementById('progress-juger').textContent = jugerProgress + '%';
            document.getElementById('progress-juger-fill').style.width = jugerProgress + '%';
            
            document.getElementById('progress-agir').textContent = agirProgress + '%';
            document.getElementById('progress-agir-fill').style.width = agirProgress + '%';

            // Storage indicator
            const storageSize = new Blob([JSON.stringify(appState)]).size;
            const storageSizeKB = (storageSize / 1024).toFixed(1);
            document.getElementById('storage-size').textContent = storageSizeKB + ' KB';
            document.getElementById('storage-fill').style.width = Math.min(100, (storageSize / 50000) * 100) + '%';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STATE MANAGEMENT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function saveState(notify = true) {
            appState.meta.updated = new Date().toISOString();
            try {
                localStorage.setItem('plaidoyer_workstation_v3', JSON.stringify(appState));
                if (notify) showToast('Projet sauvegardÃ©');
            } catch (e) {
                showToast('Erreur de sauvegarde', 'error');
            }
        }

        function loadState() {
            try {
                const saved = localStorage.getItem('plaidoyer_workstation_v3');
                if (saved) {
                    appState = JSON.parse(saved);
                    renderActors();
                    renderJournal();
                }
            } catch (e) {
                console.error('Error loading state:', e);
            }
        }

        function saveProject() {
            saveState(true);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UI UTILITIES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</span>
                <span>${message}</span>
            `;
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function debounce(fn, ms) {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => fn(...args), ms);
            };
        }

        function stripHtml(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || '';
        }

        // Close modal on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(m => {
                    m.classList.remove('active');
                });
            }
        });

        // Close modal on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
