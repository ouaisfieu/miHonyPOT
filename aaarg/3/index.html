<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Poste de Travail Plaidoyer Citoyen - Outil de rÃ©fÃ©rence pour la participation citoyenne, l'Ã©ducation populaire et la guerre cognitive">
    <meta name="theme-color" content="#0f0f17">
    <title>âš¡ PLAIDOYER CITOYEN â€” Poste de Travail | Guerre Cognitive & Ã‰ducation Populaire</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json,{%22name%22:%22Plaidoyer%20Citoyen%22,%22short_name%22:%22Plaidoyer%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22theme_color%22:%22%230f0f17%22,%22background_color%22:%22%230f0f17%22}">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=Instrument+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN SYSTEM â€” RÃ‰SISTANCE DIGITALE
   EsthÃ©tique: Brutalisme cyberpunk + Ã‰ducation populaire + ARG
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
    /* Palette principale - Rebellion informationnelle */
    --bg-abyss: #0a0a0f;
    --bg-deep: #0f0f17;
    --bg-surface: #161620;
    --bg-elevated: #1c1c28;
    --bg-card: #22222f;
    --bg-hover: #2a2a3a;
    
    /* Accents - Signaux de rÃ©sistance */
    --signal-cyan: #00ffcc;
    --signal-cyan-dim: rgba(0, 255, 204, 0.15);
    --signal-magenta: #ff00aa;
    --signal-magenta-dim: rgba(255, 0, 170, 0.15);
    --signal-gold: #ffd000;
    --signal-gold-dim: rgba(255, 208, 0, 0.15);
    --signal-red: #ff3355;
    --signal-green: #00ff88;
    --signal-blue: #3388ff;
    
    /* Phases VOIR-JUGER-AGIR */
    --phase-voir: #00b4d8;
    --phase-juger: #fb8500;
    --phase-agir: #52b788;
    
    /* ARG - ArchÃ©types */
    --arch-observateur: #64b5f6;
    --arch-analyste: #ba68c8;
    --arch-activiste: #ef5350;
    --arch-pedagogue: #66bb6a;
    
    /* Texte */
    --text-bright: #ffffff;
    --text-primary: #e8e8f0;
    --text-secondary: #9090a8;
    --text-muted: #606078;
    
    /* Bordures */
    --border-subtle: rgba(255, 255, 255, 0.06);
    --border-default: rgba(255, 255, 255, 0.12);
    --border-strong: rgba(0, 255, 204, 0.3);
    
    /* Effets */
    --glow-cyan: 0 0 30px rgba(0, 255, 204, 0.4);
    --glow-magenta: 0 0 30px rgba(255, 0, 170, 0.4);
    --glow-gold: 0 0 30px rgba(255, 208, 0, 0.4);
    
    /* Rayons */
    --radius-xs: 4px;
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 20px;
    --radius-xl: 32px;
    
    /* Transitions */
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --transition-fast: 150ms var(--ease-out-expo);
    --transition-med: 300ms var(--ease-out-expo);
    --transition-slow: 500ms var(--ease-out-expo);
}

/* Reset & Base */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; font-size: 16px; }

body {
    font-family: 'Instrument Sans', -apple-system, system-ui, sans-serif;
    background: var(--bg-abyss);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BACKGROUND EFFECTS - Atmosphere cyberpunk
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bg-matrix {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
}

.bg-matrix::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
        radial-gradient(ellipse 80% 60% at 10% 10%, rgba(0, 255, 204, 0.08), transparent),
        radial-gradient(ellipse 60% 80% at 90% 90%, rgba(255, 0, 170, 0.06), transparent),
        radial-gradient(circle at 50% 50%, rgba(255, 208, 0, 0.03), transparent);
    animation: pulse-bg 20s ease-in-out infinite;
}

.bg-grid {
    position: absolute;
    inset: 0;
    background-image: 
        linear-gradient(rgba(0, 255, 204, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 204, 0.03) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: grid-shift 30s linear infinite;
}

.bg-scanline {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.1) 2px,
        rgba(0, 0, 0, 0.1) 4px
    );
    pointer-events: none;
    opacity: 0.3;
}

@keyframes pulse-bg {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.02); }
}

@keyframes grid-shift {
    0% { transform: translate(0, 0); }
    100% { transform: translate(60px, 60px); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT - Structure principale
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.app-container {
    display: grid;
    grid-template-columns: 280px 1fr;
    grid-template-rows: auto 1fr;
    min-height: 100vh;
    position: relative;
    z-index: 1;
}

@media (max-width: 1024px) {
    .app-container { grid-template-columns: 1fr; }
    .sidebar { display: none; }
    .sidebar.mobile-open { display: flex; position: fixed; inset: 0; z-index: 1001; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER - Barre supÃ©rieure
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
    grid-column: 1 / -1;
    background: rgba(15, 15, 23, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border-subtle);
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    position: sticky;
    top: 0;
    z-index: 100;
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.logo-mark {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--signal-cyan), var(--signal-magenta));
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    box-shadow: var(--glow-cyan);
    animation: logo-pulse 4s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

.logo-mark::after {
    content: '';
    position: absolute;
    inset: 2px;
    background: var(--bg-deep);
    border-radius: calc(var(--radius-sm) - 2px);
    display: flex;
    align-items: center;
    justify-content: center;
}

.logo-mark span {
    position: relative;
    z-index: 1;
}

@keyframes logo-pulse {
    0%, 100% { box-shadow: var(--glow-cyan); }
    50% { box-shadow: var(--glow-magenta); }
}

.logo-text {
    display: flex;
    flex-direction: column;
}

.logo-title {
    font-family: 'Dela Gothic One', cursive;
    font-size: 1.1rem;
    background: linear-gradient(90deg, var(--signal-cyan), var(--signal-magenta));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0.5px;
}

.logo-subtitle {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.header-center {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.phase-indicator {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem 1rem;
    background: var(--bg-elevated);
    border-radius: var(--radius-xl);
    border: 1px solid var(--border-subtle);
}

.phase-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    transition: all var(--transition-med);
}

.phase-dot.voir { background: var(--phase-voir); }
.phase-dot.juger { background: var(--phase-juger); }
.phase-dot.agir { background: var(--phase-agir); }
.phase-dot.active { transform: scale(1.4); box-shadow: 0 0 12px currentColor; }

.phase-label {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-secondary);
    margin-left: 0.5rem;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS - SystÃ¨me de boutons
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
    font-family: 'Instrument Sans', sans-serif;
    font-weight: 600;
    font-size: 0.8rem;
    padding: 0.6rem 1rem;
    border-radius: var(--radius-sm);
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    transition: all var(--transition-fast);
    position: relative;
    overflow: hidden;
    white-space: nowrap;
}

.btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.1) 50%, transparent 60%);
    transform: translateX(-100%);
    transition: transform var(--transition-med);
}

.btn:hover::before { transform: translateX(100%); }

.btn-primary {
    background: linear-gradient(135deg, var(--signal-cyan), var(--signal-green));
    color: var(--bg-abyss);
}

.btn-primary:hover {
    box-shadow: var(--glow-cyan);
    transform: translateY(-2px);
}

.btn-secondary {
    background: var(--bg-elevated);
    color: var(--text-primary);
    border: 1px solid var(--border-default);
}

.btn-secondary:hover {
    background: var(--bg-hover);
    border-color: var(--signal-cyan);
}

.btn-danger {
    background: rgba(255, 51, 85, 0.15);
    color: var(--signal-red);
    border: 1px solid rgba(255, 51, 85, 0.3);
}

.btn-danger:hover {
    background: rgba(255, 51, 85, 0.25);
}

.btn-ghost {
    background: transparent;
    color: var(--text-secondary);
}

.btn-ghost:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.btn-icon {
    width: 36px;
    height: 36px;
    padding: 0;
    justify-content: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR - Navigation latÃ©rale
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
    background: var(--bg-deep);
    border-right: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    padding: 1rem 0;
}

.sidebar-section {
    padding: 0 0.75rem;
    margin-bottom: 1.5rem;
}

.sidebar-title {
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--text-muted);
    padding: 0 0.75rem;
    margin-bottom: 0.5rem;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.65rem 0.75rem;
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    position: relative;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
}

.nav-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background: var(--signal-cyan);
    border-radius: 0 2px 2px 0;
    transition: height var(--transition-fast);
}

.nav-item:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.nav-item.active {
    background: var(--signal-cyan-dim);
    color: var(--signal-cyan);
}

.nav-item.active::before { height: 60%; }

.nav-icon {
    width: 20px;
    text-align: center;
    font-size: 1rem;
}

.nav-badge {
    margin-left: auto;
    font-size: 0.65rem;
    padding: 2px 6px;
    border-radius: 10px;
    background: var(--signal-magenta-dim);
    color: var(--signal-magenta);
    font-weight: 600;
}

/* Phase colors for nav items */
.nav-item[data-phase="voir"] { --accent: var(--phase-voir); }
.nav-item[data-phase="juger"] { --accent: var(--phase-juger); }
.nav-item[data-phase="agir"] { --accent: var(--phase-agir); }

.nav-item[data-phase]:hover { color: var(--accent); }
.nav-item[data-phase].active { 
    background: color-mix(in srgb, var(--accent) 15%, transparent);
    color: var(--accent);
}
.nav-item[data-phase].active::before { background: var(--accent); }

/* ARG Stats in sidebar */
.arg-stats {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: 1rem;
    margin: 0 0.75rem;
}

.arg-stats-title {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--signal-gold);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.arg-level {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.arg-level-num {
    font-family: 'Dela Gothic One', cursive;
    font-size: 1.5rem;
    color: var(--signal-gold);
}

.arg-level-bar {
    flex: 1;
    height: 6px;
    background: var(--bg-card);
    border-radius: 3px;
    overflow: hidden;
}

.arg-level-progress {
    height: 100%;
    background: linear-gradient(90deg, var(--signal-gold), var(--signal-cyan));
    border-radius: 3px;
    transition: width var(--transition-slow);
}

.arg-xp {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT - Zone principale
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main-content {
    padding: 2rem;
    overflow-y: auto;
    max-height: calc(100vh - 70px);
}

.page-section {
    display: none;
    animation: fadeIn 0.4s var(--ease-out-expo);
}

.page-section.active { display: block; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.page-header {
    margin-bottom: 2rem;
}

.page-title {
    font-family: 'Dela Gothic One', cursive;
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.page-title .emoji { font-size: 1.5rem; }

.page-description {
    color: var(--text-secondary);
    font-size: 1rem;
    max-width: 60ch;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARDS - Cartes et conteneurs
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all var(--transition-med);
}

.card:hover {
    border-color: var(--border-default);
    transform: translateY(-2px);
}

.card-header {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border-subtle);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.card-title {
    font-weight: 700;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.card-body {
    padding: 1.25rem;
}

.card-footer {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--border-subtle);
    background: var(--bg-elevated);
}

/* Phase-colored cards */
.card[data-phase="voir"] { border-top: 3px solid var(--phase-voir); }
.card[data-phase="juger"] { border-top: 3px solid var(--phase-juger); }
.card[data-phase="agir"] { border-top: 3px solid var(--phase-agir); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORMS - Formulaires et inputs
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.form-group {
    margin-bottom: 1.25rem;
}

.form-label {
    display: block;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 0.4rem;
}

.form-input,
.form-textarea,
.form-select {
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--bg-abyss);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-family: inherit;
    font-size: 0.9rem;
    transition: all var(--transition-fast);
}

.form-input:focus,
.form-textarea:focus,
.form-select:focus {
    outline: none;
    border-color: var(--signal-cyan);
    box-shadow: 0 0 0 3px var(--signal-cyan-dim);
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
    line-height: 1.6;
}

.form-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.3rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GRID LAYOUTS - Grilles de contenu
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
.grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }

@media (max-width: 1200px) { .grid-4 { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 900px) { .grid-3, .grid-2 { grid-template-columns: 1fr; } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOOL CARDS - Cartes d'outils spÃ©cifiques
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tool-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 1.25rem;
    cursor: pointer;
    transition: all var(--transition-med);
    position: relative;
    overflow: hidden;
}

.tool-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent, var(--signal-cyan));
    transform: scaleX(0);
    transition: transform var(--transition-med);
}

.tool-card:hover {
    border-color: var(--accent, var(--signal-cyan));
    transform: translateY(-4px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.tool-card:hover::before { transform: scaleX(1); }

.tool-card[data-phase="voir"] { --accent: var(--phase-voir); }
.tool-card[data-phase="juger"] { --accent: var(--phase-juger); }
.tool-card[data-phase="agir"] { --accent: var(--phase-agir); }

.tool-icon {
    width: 48px;
    height: 48px;
    background: color-mix(in srgb, var(--accent, var(--signal-cyan)) 15%, transparent);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 1rem;
}

.tool-name {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 0.5rem;
}

.tool-description {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

.tool-phase-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 3px 8px;
    border-radius: 4px;
    background: color-mix(in srgb, var(--accent) 20%, transparent);
    color: var(--accent);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TABS - SystÃ¨me d'onglets
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tabs {
    display: flex;
    gap: 0.25rem;
    background: var(--bg-elevated);
    padding: 0.25rem;
    border-radius: var(--radius-sm);
    margin-bottom: 1.5rem;
}

.tab {
    flex: 1;
    padding: 0.6rem 1rem;
    background: transparent;
    border: none;
    border-radius: var(--radius-xs);
    color: var(--text-secondary);
    font-family: inherit;
    font-weight: 600;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.tab:hover { color: var(--text-primary); }

.tab.active {
    background: var(--bg-surface);
    color: var(--signal-cyan);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   IMPORT/EXPORT PANEL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.io-panel {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.io-panel-title {
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.io-formats {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.io-format {
    padding: 0.5rem 1rem;
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.io-format:hover {
    border-color: var(--signal-cyan);
    background: var(--signal-cyan-dim);
}

.io-format.active {
    border-color: var(--signal-cyan);
    background: var(--signal-cyan-dim);
    color: var(--signal-cyan);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STAKEHOLDER MAP - Cartographie des acteurs
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stakeholder-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 1px;
    background: var(--border-default);
    border-radius: var(--radius-md);
    overflow: hidden;
    aspect-ratio: 1;
    max-width: 500px;
    margin: 0 auto;
}

.stakeholder-quadrant {
    background: var(--bg-surface);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-height: 180px;
}

.stakeholder-quadrant h4 {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.stakeholder-quadrant[data-power="high"][data-interest="high"] { background: rgba(82, 183, 136, 0.1); }
.stakeholder-quadrant[data-power="high"][data-interest="low"] { background: rgba(251, 133, 0, 0.1); }
.stakeholder-quadrant[data-power="low"][data-interest="high"] { background: rgba(0, 180, 216, 0.1); }
.stakeholder-quadrant[data-power="low"][data-interest="low"] { background: rgba(96, 96, 120, 0.1); }

.stakeholder-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.3rem 0.6rem;
    background: var(--bg-elevated);
    border-radius: var(--radius-xs);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.stakeholder-chip:hover {
    transform: scale(1.05);
    background: var(--bg-hover);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROBLEM TREE - Arbre Ã  problÃ¨me
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.problem-tree {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    padding: 2rem;
}

.tree-level {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
}

.tree-node {
    padding: 0.75rem 1.25rem;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 500;
    text-align: center;
    max-width: 200px;
    position: relative;
}

.tree-node.consequence {
    background: rgba(255, 51, 85, 0.15);
    border: 1px solid rgba(255, 51, 85, 0.3);
    color: var(--signal-red);
}

.tree-node.problem {
    background: rgba(255, 208, 0, 0.15);
    border: 2px solid var(--signal-gold);
    color: var(--signal-gold);
    font-weight: 700;
    font-size: 1rem;
}

.tree-node.cause {
    background: rgba(0, 180, 216, 0.15);
    border: 1px solid rgba(0, 180, 216, 0.3);
    color: var(--phase-voir);
}

.tree-connector {
    width: 2px;
    height: 30px;
    background: var(--border-default);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ARG ELEMENTS - Gamification
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quest-card {
    background: linear-gradient(135deg, var(--bg-surface), var(--bg-elevated));
    border: 1px solid var(--signal-gold-dim);
    border-left: 4px solid var(--signal-gold);
    border-radius: var(--radius-md);
    padding: 1.25rem;
    margin-bottom: 1rem;
    position: relative;
    overflow: hidden;
}

.quest-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, var(--signal-gold-dim) 0%, transparent 70%);
    pointer-events: none;
}

.quest-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}

.quest-title {
    font-weight: 700;
    font-size: 1rem;
    color: var(--signal-gold);
}

.quest-xp {
    background: var(--signal-gold-dim);
    color: var(--signal-gold);
    padding: 0.25rem 0.6rem;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
}

.quest-description {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
}

.quest-progress {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.quest-progress-bar {
    flex: 1;
    height: 8px;
    background: var(--bg-abyss);
    border-radius: 4px;
    overflow: hidden;
}

.quest-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--signal-gold), var(--signal-cyan));
    border-radius: 4px;
    transition: width var(--transition-slow);
}

.quest-progress-text {
    font-size: 0.75rem;
    color: var(--text-muted);
    white-space: nowrap;
}

/* Archetype badges */
.archetype-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.8rem;
    border-radius: var(--radius-xl);
    font-size: 0.75rem;
    font-weight: 600;
}

.archetype-badge.observateur {
    background: rgba(100, 181, 246, 0.15);
    color: var(--arch-observateur);
    border: 1px solid rgba(100, 181, 246, 0.3);
}

.archetype-badge.analyste {
    background: rgba(186, 104, 200, 0.15);
    color: var(--arch-analyste);
    border: 1px solid rgba(186, 104, 200, 0.3);
}

.archetype-badge.activiste {
    background: rgba(239, 83, 80, 0.15);
    color: var(--arch-activiste);
    border: 1px solid rgba(239, 83, 80, 0.3);
}

.archetype-badge.pedagogue {
    background: rgba(102, 187, 106, 0.15);
    color: var(--arch-pedagogue);
    border: 1px solid rgba(102, 187, 106, 0.3);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL - FenÃªtres modales
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    animation: fadeIn 0.3s var(--ease-out-expo);
}

.modal-backdrop.active { display: flex; }

.modal {
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 600px;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.4s var(--ease-out-expo);
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.modal-header {
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid var(--border-subtle);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-title {
    font-weight: 700;
    font-size: 1.1rem;
}

.modal-close {
    width: 32px;
    height: 32px;
    background: var(--bg-elevated);
    border: none;
    border-radius: var(--radius-xs);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: all var(--transition-fast);
}

.modal-close:hover {
    background: var(--signal-red);
    color: white;
}

.modal-body {
    padding: 1.5rem;
    overflow-y: auto;
    flex: 1;
}

.modal-footer {
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border-subtle);
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST NOTIFICATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-container {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    z-index: 2000;
}

.toast {
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    padding: 1rem 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    min-width: 300px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    animation: toastSlide 0.4s var(--ease-out-expo);
}

@keyframes toastSlide {
    from { opacity: 0; transform: translateX(100px); }
    to { opacity: 1; transform: translateX(0); }
}

.toast.success { border-left: 4px solid var(--signal-green); }
.toast.error { border-left: 4px solid var(--signal-red); }
.toast.info { border-left: 4px solid var(--signal-cyan); }
.toast.warning { border-left: 4px solid var(--signal-gold); }

.toast-icon {
    font-size: 1.25rem;
}

.toast-content {
    flex: 1;
}

.toast-title {
    font-weight: 600;
    font-size: 0.9rem;
}

.toast-message {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD STATS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
}

@media (max-width: 1000px) { .stats-grid { grid-template-columns: repeat(2, 1fr); } }

.stat-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 1.25rem;
    display: flex;
    align-items: flex-start;
    gap: 1rem;
}

.stat-icon {
    width: 48px;
    height: 48px;
    background: var(--signal-cyan-dim);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.stat-content {
    flex: 1;
}

.stat-value {
    font-family: 'Dela Gothic One', cursive;
    font-size: 1.75rem;
    line-height: 1;
    margin-bottom: 0.25rem;
}

.stat-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.stat-trend {
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.stat-trend.up { color: var(--signal-green); }
.stat-trend.down { color: var(--signal-red); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRINT STYLES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media print {
    .sidebar, .header, .bg-matrix, .toast-container { display: none !important; }
    .main-content { max-height: none; padding: 0; }
    .app-container { display: block; }
    body { background: white; color: black; }
    .card { break-inside: avoid; border: 1px solid #ddd; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACCESSIBILITY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

:focus-visible {
    outline: 2px solid var(--signal-cyan);
    outline-offset: 2px;
}

/* Skip link */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--signal-cyan);
    color: var(--bg-abyss);
    padding: 0.5rem 1rem;
    z-index: 10000;
    text-decoration: none;
    font-weight: 600;
}

.skip-link:focus { top: 0; }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Aller au contenu principal</a>
    
    <!-- Background Effects -->
    <div class="bg-matrix">
        <div class="bg-grid"></div>
        <div class="bg-scanline"></div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-mark"><span>âš¡</span></div>
                <div class="logo-text">
                    <span class="logo-title">PLAIDOYER CITOYEN</span>
                    <span class="logo-subtitle">Guerre Cognitive & Ã‰ducation Populaire</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="phase-indicator">
                    <div class="phase-dot voir active" title="VOIR"></div>
                    <div class="phase-dot juger" title="JUGER"></div>
                    <div class="phase-dot agir" title="AGIR"></div>
                    <span class="phase-label" id="current-phase-label">Phase: VOIR</span>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="importData()" title="Importer">
                    ğŸ“¥ Importer
                </button>
                <button class="btn btn-secondary" onclick="showExportModal()" title="Exporter">
                    ğŸ“¤ Exporter
                </button>
                <button class="btn btn-primary" onclick="saveProject()">
                    ğŸ’¾ Sauvegarder
                </button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- ARG Stats -->
            <div class="arg-stats">
                <div class="arg-stats-title">ğŸ® ARG CITOYEN</div>
                <div class="arg-level">
                    <span class="arg-level-num" id="arg-level">3</span>
                    <div class="arg-level-bar">
                        <div class="arg-level-progress" id="arg-progress" style="width: 45%"></div>
                    </div>
                </div>
                <div class="arg-xp"><span id="arg-xp">450</span> / 1000 XP</div>
            </div>

            <!-- Navigation: Tableau de bord -->
            <div class="sidebar-section">
                <div class="sidebar-title">Tableau de bord</div>
                <button class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">ğŸ </span>
                    <span>Accueil</span>
                </button>
                <button class="nav-item" data-page="project">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span>Mon Projet</span>
                </button>
                <button class="nav-item" data-page="quests">
                    <span class="nav-icon">ğŸ¯</span>
                    <span>QuÃªtes ARG</span>
                    <span class="nav-badge">3</span>
                </button>
            </div>

            <!-- Navigation: VOIR -->
            <div class="sidebar-section">
                <div class="sidebar-title">ğŸ‘ï¸ VOIR (Analyse)</div>
                <button class="nav-item" data-page="tool-domino" data-phase="voir">
                    <span class="nav-icon">ğŸƒ</span>
                    <span>Domino du changement</span>
                </button>
                <button class="nav-item" data-page="tool-profil" data-phase="voir">
                    <span class="nav-icon">ğŸ‘¤</span>
                    <span>Profil d'engagement</span>
                </button>
                <button class="nav-item" data-page="tool-fleur" data-phase="voir">
                    <span class="nav-icon">ğŸŒ¸</span>
                    <span>Fleur de pouvoir</span>
                </button>
                <button class="nav-item" data-page="tool-acteurs" data-phase="voir">
                    <span class="nav-icon">ğŸ—ºï¸</span>
                    <span>Cartographie acteurs</span>
                </button>
            </div>

            <!-- Navigation: JUGER -->
            <div class="sidebar-section">
                <div class="sidebar-title">âš–ï¸ JUGER (StratÃ©gie)</div>
                <button class="nav-item" data-page="tool-toc" data-phase="juger">
                    <span class="nav-icon">ğŸ”„</span>
                    <span>ThÃ©orie du changement</span>
                </button>
                <button class="nav-item" data-page="tool-swot" data-phase="juger">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>Analyse SWOT</span>
                </button>
                <button class="nav-item" data-page="tool-pestel" data-phase="juger">
                    <span class="nav-icon">ğŸŒ</span>
                    <span>Analyse PESTEL</span>
                </button>
                <button class="nav-item" data-page="tool-arbre" data-phase="juger">
                    <span class="nav-icon">ğŸŒ³</span>
                    <span>Arbre Ã  problÃ¨me</span>
                </button>
                <button class="nav-item" data-page="tool-5why" data-phase="juger">
                    <span class="nav-icon">â“</span>
                    <span>Les 5 Pourquoi</span>
                </button>
            </div>

            <!-- Navigation: AGIR -->
            <div class="sidebar-section">
                <div class="sidebar-title">âœŠ AGIR (Action)</div>
                <button class="nav-item" data-page="tool-pouvoir" data-phase="agir">
                    <span class="nav-icon">âš¡</span>
                    <span>Avec/sans/contre</span>
                </button>
                <button class="nav-item" data-page="tool-smart" data-phase="agir">
                    <span class="nav-icon">ğŸ¯</span>
                    <span>Objectifs SMART</span>
                </button>
                <button class="nav-item" data-page="tool-cibles" data-phase="agir">
                    <span class="nav-icon">ğŸ¤</span>
                    <span>Cibles et alliances</span>
                </button>
                <button class="nav-item" data-page="tool-message" data-phase="agir">
                    <span class="nav-icon">ğŸ’¬</span>
                    <span>Construction message</span>
                </button>
                <button class="nav-item" data-page="tool-checklist" data-phase="agir">
                    <span class="nav-icon">âœ…</span>
                    <span>Check-list rencontre</span>
                </button>
                <button class="nav-item" data-page="tool-suivi" data-phase="agir">
                    <span class="nav-icon">ğŸ“ˆ</span>
                    <span>Suivi-Ã©valuation</span>
                </button>
            </div>

            <!-- Navigation: Guerre Cognitive -->
            <div class="sidebar-section">
                <div class="sidebar-title">ğŸ§  Guerre Cognitive</div>
                <button class="nav-item" data-page="gc-narrative">
                    <span class="nav-icon">ğŸ“–</span>
                    <span>Contre-narrative</span>
                </button>
                <button class="nav-item" data-page="gc-semantic">
                    <span class="nav-icon">ğŸ”—</span>
                    <span>Cartographie sÃ©mantique</span>
                </button>
                <button class="nav-item" data-page="gc-ebomba">
                    <span class="nav-icon">ğŸ’£</span>
                    <span>Protocole e-BOMBA</span>
                    <span class="nav-badge">âš ï¸</span>
                </button>
            </div>

            <!-- Navigation: Ressources -->
            <div class="sidebar-section">
                <div class="sidebar-title">ğŸ“š Ressources</div>
                <button class="nav-item" data-page="resources">
                    <span class="nav-icon">ğŸ”—</span>
                    <span>Liens utiles</span>
                </button>
                <button class="nav-item" data-page="wellbeing">
                    <span class="nav-icon">ğŸ’š</span>
                    <span>SantÃ© mentale</span>
                </button>
                <button class="nav-item" data-page="about">
                    <span class="nav-icon">â„¹ï¸</span>
                    <span>Ã€ propos</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="main">
            <!-- Dashboard -->
            <section class="page-section active" id="page-dashboard">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ </span>
                        Tableau de bord
                    </h1>
                    <p class="page-description">
                        Bienvenue dans votre Poste de Travail Plaidoyer Citoyen. 
                        Transformez votre indignation en action structurÃ©e.
                    </p>
                </div>

                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“‹</div>
                        <div class="stat-content">
                            <div class="stat-value" id="stat-projects">1</div>
                            <div class="stat-label">Projet actif</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ› ï¸</div>
                        <div class="stat-content">
                            <div class="stat-value" id="stat-tools">0</div>
                            <div class="stat-label">Outils complÃ©tÃ©s</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ¯</div>
                        <div class="stat-content">
                            <div class="stat-value" id="stat-quests">3</div>
                            <div class="stat-label">QuÃªtes disponibles</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âš¡</div>
                        <div class="stat-content">
                            <div class="stat-value" id="stat-xp">450</div>
                            <div class="stat-label">XP total</div>
                        </div>
                    </div>
                </div>

                <!-- Import/Export Panel -->
                <div class="io-panel">
                    <div class="io-panel-title">ğŸ“¦ Import / Export Multi-formats</div>
                    <div class="grid-2">
                        <div>
                            <div class="form-label">Importer depuis</div>
                            <div class="io-formats">
                                <label class="io-format">
                                    <input type="file" accept=".json" onchange="importJSON(event)" hidden>
                                    ğŸ“„ JSON
                                </label>
                                <label class="io-format">
                                    <input type="file" accept=".md" onchange="importMarkdown(event)" hidden>
                                    ğŸ“ Markdown
                                </label>
                                <label class="io-format">
                                    <input type="file" accept=".csv" onchange="importCSV(event)" hidden>
                                    ğŸ“Š CSV
                                </label>
                            </div>
                        </div>
                        <div>
                            <div class="form-label">Exporter vers</div>
                            <div class="io-formats">
                                <button class="io-format" onclick="exportJSON()">ğŸ“„ JSON</button>
                                <button class="io-format" onclick="exportMarkdown()">ğŸ“ Markdown</button>
                                <button class="io-format" onclick="exportHTML()">ğŸŒ HTML</button>
                                <button class="io-format" onclick="exportPDF()">ğŸ“• PDF</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Access Tools -->
                <h2 style="margin-bottom: 1rem; font-size: 1.25rem;">ğŸ› ï¸ AccÃ¨s rapide aux outils</h2>
                <div class="grid-3">
                    <div class="tool-card" data-phase="voir" onclick="navigateTo('tool-domino')">
                        <div class="tool-phase-tag">VOIR</div>
                        <div class="tool-icon">ğŸƒ</div>
                        <div class="tool-name">Domino du changement</div>
                        <div class="tool-description">DÃ©finissez votre vision du monde idÃ©al et le changement que vous souhaitez voir advenir.</div>
                    </div>
                    <div class="tool-card" data-phase="voir" onclick="navigateTo('tool-acteurs')">
                        <div class="tool-phase-tag">VOIR</div>
                        <div class="tool-icon">ğŸ—ºï¸</div>
                        <div class="tool-name">Cartographie des acteurs</div>
                        <div class="tool-description">Identifiez et positionnez les parties prenantes selon leur pouvoir et leur intÃ©rÃªt.</div>
                    </div>
                    <div class="tool-card" data-phase="juger" onclick="navigateTo('tool-arbre')">
                        <div class="tool-phase-tag">JUGER</div>
                        <div class="tool-icon">ğŸŒ³</div>
                        <div class="tool-name">Arbre Ã  problÃ¨me</div>
                        <div class="tool-description">Analysez les causes profondes et les consÃ©quences de votre problÃ©matique.</div>
                    </div>
                    <div class="tool-card" data-phase="juger" onclick="navigateTo('tool-swot')">
                        <div class="tool-phase-tag">JUGER</div>
                        <div class="tool-icon">ğŸ“Š</div>
                        <div class="tool-name">Analyse SWOT</div>
                        <div class="tool-description">Ã‰valuez vos forces, faiblesses, opportunitÃ©s et menaces stratÃ©giques.</div>
                    </div>
                    <div class="tool-card" data-phase="agir" onclick="navigateTo('tool-message')">
                        <div class="tool-phase-tag">AGIR</div>
                        <div class="tool-icon">ğŸ’¬</div>
                        <div class="tool-name">Construction de message</div>
                        <div class="tool-description">CrÃ©ez un message percutant en 5 composants clÃ©s pour votre plaidoyer.</div>
                    </div>
                    <div class="tool-card" data-phase="agir" onclick="navigateTo('tool-smart')">
                        <div class="tool-phase-tag">AGIR</div>
                        <div class="tool-icon">ğŸ¯</div>
                        <div class="tool-name">Objectifs SMART</div>
                        <div class="tool-description">DÃ©finissez des objectifs SpÃ©cifiques, Mesurables, Atteignables, RÃ©alistes et Temporels.</div>
                    </div>
                </div>
            </section>

            <!-- Project Page -->
            <section class="page-section" id="page-project">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ“‹</span>
                        Mon Projet de Plaidoyer
                    </h1>
                    <p class="page-description">
                        DÃ©finissez les informations de base de votre campagne de plaidoyer citoyen.
                    </p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“ Informations gÃ©nÃ©rales</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">Nom du projet *</label>
                                <input type="text" class="form-input" id="project-name" data-field="project_name" placeholder="Ex: DignitÃ© des prÃ©caires en Belgique">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Organisation / Collectif</label>
                                <input type="text" class="form-input" id="project-org" data-field="project_org" placeholder="Ex: Collectif BIM">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">RÃ©sumÃ© du projet</label>
                            <textarea class="form-textarea" id="project-summary" data-field="project_summary" placeholder="DÃ©crivez briÃ¨vement votre projet de plaidoyer en quelques phrases..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ProblÃ©matique centrale</label>
                            <textarea class="form-textarea" id="project-problem" data-field="project_problem" placeholder="Quelle est la problÃ©matique que vous souhaitez rÃ©soudre?"></textarea>
                            <div class="form-hint">ğŸ’¡ Conseil: Soyez prÃ©cis et factuel. Ã‰vitez les gÃ©nÃ©ralitÃ©s.</div>
                        </div>
                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">Date de dÃ©but</label>
                                <input type="date" class="form-input" id="project-start" data-field="project_start">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Ã‰chÃ©ance cible</label>
                                <input type="date" class="form-input" id="project-deadline" data-field="project_deadline">
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary" onclick="saveProject()">ğŸ’¾ Sauvegarder le projet</button>
                    </div>
                </div>
            </section>

            <!-- ARG Quests Page -->
            <section class="page-section" id="page-quests">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ¯</span>
                        QuÃªtes ARG Citoyen
                    </h1>
                    <p class="page-description">
                        Transformez vos actions en quÃªtes gamifiÃ©es. JOUER = AGIR = APPRENDRE = TRANSMETTRE.
                    </p>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="card-body">
                        <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                            <div class="archetype-badge observateur">ğŸ‘ï¸ Observateur</div>
                            <div class="archetype-badge analyste">ğŸ”¬ Analyste</div>
                            <div class="archetype-badge activiste">âœŠ Activiste</div>
                            <div class="archetype-badge pedagogue">ğŸ“š PÃ©dagogue</div>
                            <span style="color: var(--text-muted); font-size: 0.85rem; margin-left: auto;">Choisissez votre archÃ©type pour dÃ©bloquer des quÃªtes spÃ©cifiques</span>
                        </div>
                    </div>
                </div>

                <div class="quest-card">
                    <div class="quest-header">
                        <div class="quest-title">ğŸ” Premier Ã‰veil</div>
                        <div class="quest-xp">+100 XP</div>
                    </div>
                    <div class="quest-description">
                        ComplÃ©tez le "Domino du changement" pour dÃ©finir votre vision et votre premiÃ¨re prise de conscience.
                    </div>
                    <div class="quest-progress">
                        <div class="quest-progress-bar">
                            <div class="quest-progress-fill" style="width: 0%"></div>
                        </div>
                        <span class="quest-progress-text">0/1</span>
                    </div>
                </div>

                <div class="quest-card">
                    <div class="quest-header">
                        <div class="quest-title">ğŸ—ºï¸ Cartographe Social</div>
                        <div class="quest-xp">+150 XP</div>
                    </div>
                    <div class="quest-description">
                        Identifiez au moins 5 acteurs clÃ©s dans votre cartographie des parties prenantes.
                    </div>
                    <div class="quest-progress">
                        <div class="quest-progress-bar">
                            <div class="quest-progress-fill" style="width: 40%"></div>
                        </div>
                        <span class="quest-progress-text">2/5</span>
                    </div>
                </div>

                <div class="quest-card">
                    <div class="quest-header">
                        <div class="quest-title">ğŸ’£ Agent de la Contre-Narrative</div>
                        <div class="quest-xp">+300 XP</div>
                    </div>
                    <div class="quest-description">
                        Construisez un message percutant et identifiez les entitÃ©s sÃ©mantiques Ã  neutraliser ou renforcer.
                    </div>
                    <div class="quest-progress">
                        <div class="quest-progress-bar">
                            <div class="quest-progress-fill" style="width: 0%"></div>
                        </div>
                        <span class="quest-progress-text">0/3</span>
                    </div>
                </div>
            </section>

            <!-- Tool: Domino du changement -->
            <section class="page-section" id="page-tool-domino">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸƒ</span>
                        Domino du changement
                    </h1>
                    <p class="page-description">
                        DÃ©finissez votre vision du monde idÃ©al et identifiez le premier domino Ã  faire tomber.
                    </p>
                </div>

                <div class="card" data-phase="voir">
                    <div class="card-header">
                        <h3 class="card-title">ğŸŒ Vision & Changement</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">1. Le monde tel qu'il est (situation actuelle)</label>
                            <textarea class="form-textarea" data-field="domino_current" placeholder="DÃ©crivez la situation problÃ©matique actuelle..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">2. Le monde tel qu'il devrait Ãªtre (vision)</label>
                            <textarea class="form-textarea" data-field="domino_vision" placeholder="DÃ©crivez votre vision d'un monde meilleur..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">3. Le premier domino (changement initial)</label>
                            <textarea class="form-textarea" data-field="domino_first" placeholder="Quel est le premier changement qui enclenchera les autres?"></textarea>
                            <div class="form-hint">ğŸ’¡ Le premier domino doit Ãªtre rÃ©alisable et stratÃ©gique - il dÃ©clenche une rÃ©action en chaÃ®ne.</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">4. Effet domino attendu</label>
                            <textarea class="form-textarea" data-field="domino_effect" placeholder="Quels changements en cascade attendez-vous?"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: Cartographie des acteurs -->
            <section class="page-section" id="page-tool-acteurs">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ—ºï¸</span>
                        Cartographie des acteurs
                    </h1>
                    <p class="page-description">
                        Positionnez les parties prenantes selon leur niveau de pouvoir et d'intÃ©rÃªt.
                    </p>
                </div>

                <div class="card" data-phase="voir">
                    <div class="card-body">
                        <!-- Add stakeholder form -->
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                            <input type="text" class="form-input" id="new-stakeholder-name" placeholder="Nom de l'acteur" style="flex: 1; min-width: 200px;">
                            <select class="form-select" id="new-stakeholder-power" style="width: auto;">
                                <option value="high">Pouvoir Ã©levÃ©</option>
                                <option value="low">Pouvoir faible</option>
                            </select>
                            <select class="form-select" id="new-stakeholder-interest" style="width: auto;">
                                <option value="high">IntÃ©rÃªt Ã©levÃ©</option>
                                <option value="low">IntÃ©rÃªt faible</option>
                            </select>
                            <select class="form-select" id="new-stakeholder-type" style="width: auto;">
                                <option value="ally">ğŸŸ¢ AlliÃ©</option>
                                <option value="target">ğŸ¯ Cible</option>
                                <option value="opponent">ğŸ”´ Opposant</option>
                                <option value="neutral">âšª Neutre</option>
                            </select>
                            <button class="btn btn-primary" onclick="addStakeholder()">+ Ajouter</button>
                        </div>

                        <!-- Stakeholder Matrix -->
                        <div class="stakeholder-grid">
                            <div class="stakeholder-quadrant" data-power="high" data-interest="low" id="quadrant-hl">
                                <h4>âš ï¸ Ã€ surveiller</h4>
                                <p style="font-size: 0.75rem; color: var(--text-muted);">Pouvoir Ã©levÃ©, IntÃ©rÃªt faible</p>
                            </div>
                            <div class="stakeholder-quadrant" data-power="high" data-interest="high" id="quadrant-hh">
                                <h4>ğŸ¯ GÃ©rer de prÃ¨s</h4>
                                <p style="font-size: 0.75rem; color: var(--text-muted);">Pouvoir Ã©levÃ©, IntÃ©rÃªt Ã©levÃ©</p>
                            </div>
                            <div class="stakeholder-quadrant" data-power="low" data-interest="low" id="quadrant-ll">
                                <h4>ğŸ“Š Informer</h4>
                                <p style="font-size: 0.75rem; color: var(--text-muted);">Pouvoir faible, IntÃ©rÃªt faible</p>
                            </div>
                            <div class="stakeholder-quadrant" data-power="low" data-interest="high" id="quadrant-lh">
                                <h4>ğŸ’¬ Consulter</h4>
                                <p style="font-size: 0.75rem; color: var(--text-muted);">Pouvoir faible, IntÃ©rÃªt Ã©levÃ©</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: SWOT -->
            <section class="page-section" id="page-tool-swot">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ“Š</span>
                        Analyse SWOT
                    </h1>
                    <p class="page-description">
                        Ã‰valuez vos forces, faiblesses, opportunitÃ©s et menaces.
                    </p>
                </div>

                <div class="grid-2">
                    <div class="card" style="border-top: 3px solid var(--signal-green);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-green);">ğŸ’ª Forces (Strengths)</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="swot_strengths" placeholder="Quels sont vos atouts internes? CompÃ©tences, ressources, rÃ©seau..."></textarea>
                        </div>
                    </div>
                    <div class="card" style="border-top: 3px solid var(--signal-red);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-red);">âš ï¸ Faiblesses (Weaknesses)</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="swot_weaknesses" placeholder="Quelles sont vos limites internes? Manques, vulnÃ©rabilitÃ©s..."></textarea>
                        </div>
                    </div>
                    <div class="card" style="border-top: 3px solid var(--signal-cyan);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-cyan);">ğŸš€ OpportunitÃ©s (Opportunities)</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="swot_opportunities" placeholder="Quels facteurs externes peuvent vous aider? Tendances, alliÃ©s potentiels..."></textarea>
                        </div>
                    </div>
                    <div class="card" style="border-top: 3px solid var(--signal-gold);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-gold);">âš¡ Menaces (Threats)</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="swot_threats" placeholder="Quels facteurs externes peuvent vous nuire? Opposants, obstacles..."></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: Arbre Ã  problÃ¨me -->
            <section class="page-section" id="page-tool-arbre">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸŒ³</span>
                        Arbre Ã  problÃ¨me
                    </h1>
                    <p class="page-description">
                        Analysez les causes (racines) et consÃ©quences (branches) de votre problÃ©matique (tronc).
                    </p>
                </div>

                <div class="card" data-phase="juger">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">ğŸŒ¿ ConsÃ©quences (branches) - effets visibles</label>
                            <textarea class="form-textarea" data-field="tree_consequences" placeholder="Listez les consÃ©quences de votre problÃ¨me (une par ligne)..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" style="color: var(--signal-gold);">ğŸªµ PROBLÃˆME CENTRAL (tronc)</label>
                            <input type="text" class="form-input" data-field="tree_problem" placeholder="Formulez le problÃ¨me central en une phrase" style="border-color: var(--signal-gold); font-weight: 600;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ğŸŒ± Causes (racines) - origines profondes</label>
                            <textarea class="form-textarea" data-field="tree_causes" placeholder="Listez les causes profondes du problÃ¨me (une par ligne)..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ‘ï¸ Visualisation</h3>
                        <button class="btn btn-secondary" onclick="generateTreeVisualization()">ğŸ”„ GÃ©nÃ©rer</button>
                    </div>
                    <div class="card-body">
                        <div class="problem-tree" id="tree-visualization">
                            <div class="tree-level" id="tree-consequences-viz"></div>
                            <div class="tree-connector"></div>
                            <div class="tree-node problem" id="tree-problem-viz">ProblÃ¨me central</div>
                            <div class="tree-connector"></div>
                            <div class="tree-level" id="tree-causes-viz"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: 5 Pourquoi -->
            <section class="page-section" id="page-tool-5why">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">â“</span>
                        Les 5 Pourquoi
                    </h1>
                    <p class="page-description">
                        Technique de recherche des causes profondes par questionnement itÃ©ratif.
                    </p>
                </div>

                <div class="card" data-phase="juger">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">ğŸ“Œ ProblÃ¨me de dÃ©part</label>
                            <textarea class="form-textarea" data-field="why_problem" placeholder="DÃ©crivez le problÃ¨me initial que vous voulez analyser..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">1ï¸âƒ£ Pourquoi ?</label>
                            <textarea class="form-textarea" data-field="why_1" placeholder="PremiÃ¨re rÃ©ponse..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">2ï¸âƒ£ Pourquoi ?</label>
                            <textarea class="form-textarea" data-field="why_2" placeholder="DeuxiÃ¨me niveau de questionnement..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">3ï¸âƒ£ Pourquoi ?</label>
                            <textarea class="form-textarea" data-field="why_3" placeholder="TroisiÃ¨me niveau..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">4ï¸âƒ£ Pourquoi ?</label>
                            <textarea class="form-textarea" data-field="why_4" placeholder="QuatriÃ¨me niveau..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" style="color: var(--signal-gold);">5ï¸âƒ£ Pourquoi ? â†’ CAUSE RACINE</label>
                            <textarea class="form-textarea" data-field="why_5" placeholder="Cause racine identifiÃ©e..." style="border-color: var(--signal-gold);"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: Avec/sans/contre le pouvoir -->
            <section class="page-section" id="page-tool-pouvoir">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">âš¡</span>
                        Avec / Sans / Contre le pouvoir
                    </h1>
                    <p class="page-description">
                        DÃ©finissez votre positionnement stratÃ©gique par rapport aux institutions.
                    </p>
                </div>

                <div class="grid-3">
                    <div class="card" style="border-top: 4px solid var(--signal-green);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-green);">ğŸ¤ AVEC le pouvoir</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="power_with" placeholder="Collaboration, dialogue, participation aux instances officielles..."></textarea>
                            <div class="form-hint">Lobbying, auditions, commissions consultatives</div>
                        </div>
                    </div>
                    <div class="card" style="border-top: 4px solid var(--signal-gold);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-gold);">ğŸ”„ SANS le pouvoir</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="power_without" placeholder="Actions autonomes, alternatives, construction d'espaces propres..."></textarea>
                            <div class="form-hint">Projets pilotes, mÃ©dias alternatifs, Ã©conomie sociale</div>
                        </div>
                    </div>
                    <div class="card" style="border-top: 4px solid var(--signal-red);">
                        <div class="card-header">
                            <h3 class="card-title" style="color: var(--signal-red);">âœŠ CONTRE le pouvoir</h3>
                        </div>
                        <div class="card-body">
                            <textarea class="form-textarea" data-field="power_against" placeholder="Opposition, contestation, mobilisation de masse..."></textarea>
                            <div class="form-hint">Manifestations, pÃ©titions, dÃ©sobÃ©issance civile</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool: Construction de message -->
            <section class="page-section" id="page-tool-message">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ’¬</span>
                        Construction de message
                    </h1>
                    <p class="page-description">
                        CrÃ©ez un message percutant en 5 composants selon la mÃ©thodologie Justice et Paix.
                    </p>
                </div>

                <div class="card" data-phase="agir">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">1ï¸âƒ£ ACCROCHE</label>
                            <textarea class="form-textarea" data-field="msg_hook" placeholder="Phrase d'accroche qui capte l'attention (fait marquant, statistique choc, question rhÃ©torique)..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">2ï¸âƒ£ PROBLÃˆME</label>
                            <textarea class="form-textarea" data-field="msg_problem" placeholder="Description claire et concise du problÃ¨me..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">3ï¸âƒ£ IMPORTANCE</label>
                            <textarea class="form-textarea" data-field="msg_importance" placeholder="Pourquoi c'est important ? Quels enjeux ? Qui est touchÃ© ?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">4ï¸âƒ£ CIBLE</label>
                            <textarea class="form-textarea" data-field="msg_target" placeholder="Ã€ qui vous adressez-vous ? Qui a le pouvoir de changer les choses ?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">5ï¸âƒ£ ACTION DEMANDÃ‰E</label>
                            <textarea class="form-textarea" data-field="msg_action" placeholder="Que demandez-vous concrÃ¨tement ? (Call to action clair et rÃ©alisable)"></textarea>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary" onclick="generateFullMessage()">âœ¨ GÃ©nÃ©rer le message complet</button>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;" id="message-preview-card" hidden>
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“ Message gÃ©nÃ©rÃ©</h3>
                        <button class="btn btn-secondary" onclick="copyMessage()">ğŸ“‹ Copier</button>
                    </div>
                    <div class="card-body">
                        <div id="message-preview" style="white-space: pre-wrap; line-height: 1.8;"></div>
                    </div>
                </div>
            </section>

            <!-- Tool: Objectifs SMART -->
            <section class="page-section" id="page-tool-smart">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ¯</span>
                        Objectifs SMART
                    </h1>
                    <p class="page-description">
                        DÃ©finissez des objectifs SpÃ©cifiques, Mesurables, Atteignables, RÃ©alistes et Temporels.
                    </p>
                </div>

                <div class="card" data-phase="agir">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">ğŸ¯ S - SpÃ©cifique</label>
                            <textarea class="form-textarea" data-field="smart_s" placeholder="Que voulez-vous accomplir exactement ? Soyez prÃ©cis."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ğŸ“ M - Mesurable</label>
                            <textarea class="form-textarea" data-field="smart_m" placeholder="Comment saurez-vous que l'objectif est atteint ? Quels indicateurs ?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">âœ… A - Atteignable</label>
                            <textarea class="form-textarea" data-field="smart_a" placeholder="Avez-vous les ressources et capacitÃ©s nÃ©cessaires ?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ğŸ”— R - RÃ©aliste (Pertinent)</label>
                            <textarea class="form-textarea" data-field="smart_r" placeholder="Cet objectif est-il alignÃ© avec votre vision et vos capacitÃ©s ?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">â° T - Temporel</label>
                            <textarea class="form-textarea" data-field="smart_t" placeholder="Quelle est votre Ã©chÃ©ance ? Quand voulez-vous y arriver ?"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Guerre Cognitive: Contre-narrative -->
            <section class="page-section" id="page-gc-narrative">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ“–</span>
                        Contre-Narrative
                    </h1>
                    <p class="page-description">
                        Construisez votre rÃ©cit alternatif face aux narratives dominantes.
                    </p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ¯ Analyse de la narrative adverse</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">Narrative dominante Ã  contrer</label>
                            <textarea class="form-textarea" data-field="gc_dominant_narrative" placeholder="DÃ©crivez le rÃ©cit mÃ©diatique hostile que vous souhaitez dÃ©construire..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Arguments adverses principaux</label>
                            <textarea class="form-textarea" data-field="gc_adverse_args" placeholder="Listez les arguments utilisÃ©s contre vous..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Biais et omissions identifiÃ©s</label>
                            <textarea class="form-textarea" data-field="gc_bias" placeholder="Quels biais, omissions ou manipulations avez-vous identifiÃ©s ?"></textarea>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">âœŠ Votre contre-narrative</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">RÃ©cit alternatif</label>
                            <textarea class="form-textarea" data-field="gc_counter_narrative" placeholder="Formulez votre version des faits, votre histoire..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Concepts clÃ©s Ã  associer Ã  votre entitÃ©</label>
                            <textarea class="form-textarea" data-field="gc_positive_concepts" placeholder="Quels concepts positifs voulez-vous associer Ã  votre groupe ? (rÃ©silience, dignitÃ©, solidaritÃ©...)"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Preuves et tÃ©moignages</label>
                            <textarea class="form-textarea" data-field="gc_evidence" placeholder="Quelles preuves, donnÃ©es, tÃ©moignages appuient votre rÃ©cit ?"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SantÃ© Mentale -->
            <section class="page-section" id="page-wellbeing">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">ğŸ’š</span>
                        SantÃ© mentale & RÃ©silience
                    </h1>
                    <p class="page-description">
                        Le militantisme peut Ãªtre Ã©puisant. Prenez soin de vous pour tenir sur la durÃ©e.
                    </p>
                </div>

                <div class="grid-2">
                    <div class="card" style="border-left: 4px solid var(--signal-green);">
                        <div class="card-body">
                            <h3 style="margin-bottom: 1rem;">ğŸ§˜ Ressources bien-Ãªtre</h3>
                            <ul style="list-style: none; display: flex; flex-direction: column; gap: 0.75rem;">
                                <li><a href="https://nyxo.brussels" target="_blank" style="color: var(--signal-cyan); text-decoration: none;">ğŸ’š nyxo.brussels - SantÃ© mentale Bruxelles</a></li>
                                <li><a href="https://www.0800-32123.be" target="_blank" style="color: var(--signal-cyan); text-decoration: none;">ğŸ“ Centre de PrÃ©vention du Suicide</a></li>
                                <li><a href="https://www.ssmulb.be" target="_blank" style="color: var(--signal-cyan); text-decoration: none;">ğŸ¥ Services de SantÃ© Mentale ULB</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card" style="border-left: 4px solid var(--signal-gold);">
                        <div class="card-body">
                            <h3 style="margin-bottom: 1rem;">âš ï¸ Signes d'alerte</h3>
                            <ul style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                <li>â€¢ Ã‰puisement persistant</li>
                                <li>â€¢ Sentiment d'impuissance chronique</li>
                                <li>â€¢ Isolement social</li>
                                <li>â€¢ Cynisme excessif</li>
                                <li>â€¢ DifficultÃ©s de sommeil</li>
                            </ul>
                            <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                                Si vous reconnaissez ces signes, faites une pause et parlez Ã  quelqu'un.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-body">
                        <h3 style="margin-bottom: 1rem;">ğŸ“ Journal de rÃ©silience</h3>
                        <div class="form-group">
                            <label class="form-label">Comment vous sentez-vous aujourd'hui ?</label>
                            <textarea class="form-textarea" data-field="wellbeing_journal" placeholder="Prenez un moment pour noter vos Ã©motions, vos victoires mÃªme petites, et ce qui vous donne de l'Ã©nergie..."></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ã€ propos -->
            <section class="page-section" id="page-about">
                <div class="page-header">
                    <h1 class="page-title">
                        <span class="emoji">â„¹ï¸</span>
                        Ã€ propos
                    </h1>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h3 style="margin-bottom: 1rem;">Poste de Travail Plaidoyer Citoyen</h3>
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                            Cet outil est nÃ© d'une blessure et d'une indignation face Ã  la stigmatisation des personnes en situation de prÃ©caritÃ©. 
                            Il vise Ã  transformer cette colÃ¨re en action structurÃ©e, en combinant :
                        </p>
                        <ul style="list-style: none; display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1.5rem;">
                            <li>ğŸ“‹ Les <strong>15 outils de plaidoyer</strong> de Justice et Paix (mÃ©thodologie VOIR-JUGER-AGIR)</li>
                            <li>ğŸ§  Les principes de la <strong>guerre cognitive</strong> et de la domination sÃ©mantique</li>
                            <li>ğŸ® La <strong>gamification</strong> via un ARG (Alternate Reality Game) citoyen</li>
                            <li>ğŸ“š L'<strong>Ã©ducation populaire</strong> et la transmission des savoirs</li>
                            <li>ğŸ’š L'attention Ã  la <strong>santÃ© mentale</strong> des militantÂ·eÂ·s</li>
                        </ul>
                        
                        <h4 style="margin-bottom: 0.75rem;">Philosophie</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            "JOUER = AGIR = APPRENDRE = TRANSMETTRE" â€” Chaque action devient une quÃªte, 
                            chaque apprentissage un niveau, chaque transmission un acte de rÃ©sistance.
                        </p>

                        <h4 style="margin-bottom: 0.75rem;">Ressources</h4>
                        <ul style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem;">
                            <li><a href="https://ouaisfieu.github.io/ccplc/" target="_blank" style="color: var(--signal-cyan);">CCPLC - Collectif Citoyen pour la Participation Libre & Consciente</a></li>
                            <li><a href="https://justicepaix.be" target="_blank" style="color: var(--signal-cyan);">Commission Justice et Paix Belgique</a></li>
                            <li><a href="https://nyxo.brussels" target="_blank" style="color: var(--signal-cyan);">nyxo.brussels - SantÃ© mentale</a></li>
                        </ul>

                        <div style="margin-top: 2rem; padding: 1rem; background: var(--bg-elevated); border-radius: var(--radius-sm);">
                            <p style="font-size: 0.85rem; color: var(--text-muted); text-align: center;">
                                ğŸ”“ Cet outil est libre et fonctionne 100% hors-ligne.<br>
                                Vos donnÃ©es restent sur votre appareil (localStorage).
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- More tool pages would be added here... -->
            
        </main>
    </div>

    <!-- Export Modal -->
    <div class="modal-backdrop" id="export-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">ğŸ“¤ Exporter le projet</h3>
                <button class="modal-close" onclick="closeExportModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">Choisissez le format d'export :</p>
                <div class="io-formats" style="flex-direction: column; gap: 0.75rem;">
                    <button class="io-format" onclick="exportJSON()" style="justify-content: flex-start; padding: 1rem;">
                        ğŸ“„ <strong>JSON</strong> â€” Format de donnÃ©es brutes, idÃ©al pour sauvegarde et rÃ©import
                    </button>
                    <button class="io-format" onclick="exportMarkdown()" style="justify-content: flex-start; padding: 1rem;">
                        ğŸ“ <strong>Markdown</strong> â€” Document lisible, compatible Obsidian/Notion
                    </button>
                    <button class="io-format" onclick="exportHTML()" style="justify-content: flex-start; padding: 1rem;">
                        ğŸŒ <strong>HTML</strong> â€” Page web autonome, partageable
                    </button>
                    <button class="io-format" onclick="window.print()" style="justify-content: flex-start; padding: 1rem;">
                        ğŸ–¨ï¸ <strong>PDF (Imprimer)</strong> â€” Utilisez Ctrl+P ou Cmd+P
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APPLICATION STATE & DATA MANAGEMENT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const APP_VERSION = '1.0.0';
const STORAGE_KEY = 'plaidoyer_citizen_workstation';

// Application state
let appState = {
    currentPage: 'dashboard',
    currentPhase: 'voir',
    project: {},
    tools: {},
    stakeholders: [],
    arg: {
        level: 3,
        xp: 450,
        archetype: null,
        quests: []
    },
    meta: {
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        version: APP_VERSION
    }
};

// Load state from localStorage
function loadState() {
    try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            const parsed = JSON.parse(saved);
            appState = { ...appState, ...parsed };
            console.log('âœ… Ã‰tat chargÃ© depuis localStorage');
        }
    } catch (e) {
        console.error('Erreur chargement Ã©tat:', e);
    }
}

// Save state to localStorage
function saveState() {
    try {
        appState.meta.updatedAt = new Date().toISOString();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(appState));
        console.log('ğŸ’¾ Ã‰tat sauvegardÃ©');
    } catch (e) {
        console.error('Erreur sauvegarde Ã©tat:', e);
    }
}

// Initialize app
function initApp() {
    loadState();
    initNavigation();
    initFormFields();
    restoreFormData();
    updateARGDisplay();
    updateStats();
    
    // Auto-save on input
    document.querySelectorAll('[data-field]').forEach(el => {
        el.addEventListener('input', debounce(() => {
            const field = el.dataset.field;
            appState.tools[field] = el.value;
            saveState();
        }, 500));
    });

    showToast('success', 'Bienvenue !', 'Votre session est restaurÃ©e.');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function initNavigation() {
    document.querySelectorAll('.nav-item[data-page]').forEach(btn => {
        btn.addEventListener('click', () => {
            const page = btn.dataset.page;
            navigateTo(page);
        });
    });
}

function navigateTo(pageId) {
    // Update nav items
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.toggle('active', item.dataset.page === pageId);
    });

    // Update pages
    document.querySelectorAll('.page-section').forEach(section => {
        section.classList.toggle('active', section.id === `page-${pageId}`);
    });

    // Update phase indicator
    const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
    if (navItem && navItem.dataset.phase) {
        updatePhaseIndicator(navItem.dataset.phase);
    }

    appState.currentPage = pageId;
    saveState();

    // Scroll to top
    document.querySelector('.main-content').scrollTop = 0;
}

function updatePhaseIndicator(phase) {
    document.querySelectorAll('.phase-dot').forEach(dot => {
        dot.classList.remove('active');
    });
    const activeDot = document.querySelector(`.phase-dot.${phase}`);
    if (activeDot) activeDot.classList.add('active');
    
    const label = document.getElementById('current-phase-label');
    if (label) {
        const phases = { voir: 'VOIR', juger: 'JUGER', agir: 'AGIR' };
        label.textContent = `Phase: ${phases[phase] || phase.toUpperCase()}`;
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM MANAGEMENT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function initFormFields() {
    // Nothing special needed, handled in initApp
}

function restoreFormData() {
    document.querySelectorAll('[data-field]').forEach(el => {
        const field = el.dataset.field;
        if (appState.tools[field]) {
            el.value = appState.tools[field];
        }
    });

    // Restore stakeholders
    if (appState.stakeholders && appState.stakeholders.length) {
        appState.stakeholders.forEach(s => addStakeholderToDOM(s));
    }
}

function saveProject() {
    document.querySelectorAll('[data-field]').forEach(el => {
        appState.tools[el.dataset.field] = el.value;
    });
    saveState();
    showToast('success', 'Projet sauvegardÃ©', 'Vos donnÃ©es sont enregistrÃ©es localement.');
    addXP(25, 'Sauvegarde du projet');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STAKEHOLDER MANAGEMENT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function addStakeholder() {
    const name = document.getElementById('new-stakeholder-name').value.trim();
    const power = document.getElementById('new-stakeholder-power').value;
    const interest = document.getElementById('new-stakeholder-interest').value;
    const type = document.getElementById('new-stakeholder-type').value;

    if (!name) {
        showToast('error', 'Erreur', 'Veuillez entrer un nom d\'acteur.');
        return;
    }

    const stakeholder = {
        id: Date.now(),
        name,
        power,
        interest,
        type
    };

    appState.stakeholders.push(stakeholder);
    addStakeholderToDOM(stakeholder);
    saveState();

    // Clear input
    document.getElementById('new-stakeholder-name').value = '';
    
    addXP(15, 'Acteur ajoutÃ© Ã  la cartographie');
}

function addStakeholderToDOM(stakeholder) {
    const quadrantId = `quadrant-${stakeholder.power[0]}${stakeholder.interest[0]}`;
    const quadrant = document.getElementById(quadrantId);
    
    if (!quadrant) return;

    const typeEmojis = {
        ally: 'ğŸŸ¢',
        target: 'ğŸ¯',
        opponent: 'ğŸ”´',
        neutral: 'âšª'
    };

    const chip = document.createElement('div');
    chip.className = 'stakeholder-chip';
    chip.dataset.id = stakeholder.id;
    chip.innerHTML = `${typeEmojis[stakeholder.type]} ${stakeholder.name}`;
    chip.onclick = () => removeStakeholder(stakeholder.id);
    
    quadrant.appendChild(chip);
}

function removeStakeholder(id) {
    appState.stakeholders = appState.stakeholders.filter(s => s.id !== id);
    const chip = document.querySelector(`.stakeholder-chip[data-id="${id}"]`);
    if (chip) chip.remove();
    saveState();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROBLEM TREE VISUALIZATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function generateTreeVisualization() {
    const problem = appState.tools.tree_problem || 'ProblÃ¨me central';
    const consequences = (appState.tools.tree_consequences || '').split('\n').filter(Boolean);
    const causes = (appState.tools.tree_causes || '').split('\n').filter(Boolean);

    // Update problem node
    document.getElementById('tree-problem-viz').textContent = problem;

    // Update consequences
    const consViz = document.getElementById('tree-consequences-viz');
    consViz.innerHTML = consequences.map(c => 
        `<div class="tree-node consequence">${c}</div>`
    ).join('');

    // Update causes
    const causesViz = document.getElementById('tree-causes-viz');
    causesViz.innerHTML = causes.map(c => 
        `<div class="tree-node cause">${c}</div>`
    ).join('');

    showToast('info', 'Visualisation gÃ©nÃ©rÃ©e', 'Arbre Ã  problÃ¨me mis Ã  jour.');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MESSAGE CONSTRUCTION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function generateFullMessage() {
    const hook = appState.tools.msg_hook || '';
    const problem = appState.tools.msg_problem || '';
    const importance = appState.tools.msg_importance || '';
    const target = appState.tools.msg_target || '';
    const action = appState.tools.msg_action || '';

    const message = `${hook}

${problem}

${importance}

${target ? `Ã€ l'attention de : ${target}` : ''}

ğŸ‘‰ ${action}`;

    document.getElementById('message-preview').textContent = message;
    document.getElementById('message-preview-card').hidden = false;

    addXP(50, 'Message de plaidoyer construit');
}

function copyMessage() {
    const message = document.getElementById('message-preview').textContent;
    navigator.clipboard.writeText(message).then(() => {
        showToast('success', 'CopiÃ© !', 'Message copiÃ© dans le presse-papier.');
    });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ARG GAMIFICATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function updateARGDisplay() {
    document.getElementById('arg-level').textContent = appState.arg.level;
    document.getElementById('arg-xp').textContent = appState.arg.xp;
    
    const xpForNextLevel = appState.arg.level * 1000;
    const progress = (appState.arg.xp % 1000) / 10;
    document.getElementById('arg-progress').style.width = `${progress}%`;
}

function addXP(amount, reason) {
    appState.arg.xp += amount;
    
    // Level up check
    const xpForNextLevel = appState.arg.level * 1000;
    if (appState.arg.xp >= xpForNextLevel) {
        appState.arg.level++;
        showToast('success', 'ğŸ‰ LEVEL UP !', `Vous Ãªtes maintenant niveau ${appState.arg.level}`);
    }

    updateARGDisplay();
    updateStats();
    saveState();
}

function updateStats() {
    document.getElementById('stat-xp').textContent = appState.arg.xp;
    
    // Count completed tools
    const completed = Object.values(appState.tools).filter(v => v && v.length > 10).length;
    document.getElementById('stat-tools').textContent = completed;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   IMPORT / EXPORT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function showExportModal() {
    document.getElementById('export-modal').classList.add('active');
}

function closeExportModal() {
    document.getElementById('export-modal').classList.remove('active');
}

function exportJSON() {
    const data = JSON.stringify(appState, null, 2);
    downloadFile(data, 'plaidoyer-project.json', 'application/json');
    showToast('success', 'Export JSON', 'Fichier tÃ©lÃ©chargÃ© avec succÃ¨s.');
    closeExportModal();
}

function exportMarkdown() {
    let md = `# Projet de Plaidoyer Citoyen

**ExportÃ© le:** ${new Date().toLocaleDateString('fr-FR')}

---

## Informations du projet

- **Nom:** ${appState.tools.project_name || 'Non dÃ©fini'}
- **Organisation:** ${appState.tools.project_org || 'Non dÃ©finie'}

### RÃ©sumÃ©
${appState.tools.project_summary || '_Non renseignÃ©_'}

### ProblÃ©matique
${appState.tools.project_problem || '_Non renseignÃ©e_'}

---

## VOIR (Analyse)

### Domino du changement
**Situation actuelle:** ${appState.tools.domino_current || '_Non renseignÃ©_'}

**Vision:** ${appState.tools.domino_vision || '_Non renseignÃ©e_'}

**Premier domino:** ${appState.tools.domino_first || '_Non renseignÃ©_'}

---

## JUGER (StratÃ©gie)

### Analyse SWOT
- **Forces:** ${appState.tools.swot_strengths || '_Non renseignÃ©_'}
- **Faiblesses:** ${appState.tools.swot_weaknesses || '_Non renseignÃ©_'}
- **OpportunitÃ©s:** ${appState.tools.swot_opportunities || '_Non renseignÃ©_'}
- **Menaces:** ${appState.tools.swot_threats || '_Non renseignÃ©_'}

### Arbre Ã  problÃ¨me
**ProblÃ¨me central:** ${appState.tools.tree_problem || '_Non renseignÃ©_'}

**Causes:** ${appState.tools.tree_causes || '_Non renseignÃ©_'}

**ConsÃ©quences:** ${appState.tools.tree_consequences || '_Non renseignÃ©_'}

---

## AGIR (Action)

### Message de plaidoyer
1. **Accroche:** ${appState.tools.msg_hook || '_Non renseignÃ©_'}
2. **ProblÃ¨me:** ${appState.tools.msg_problem || '_Non renseignÃ©_'}
3. **Importance:** ${appState.tools.msg_importance || '_Non renseignÃ©_'}
4. **Cible:** ${appState.tools.msg_target || '_Non renseignÃ©_'}
5. **Action:** ${appState.tools.msg_action || '_Non renseignÃ©_'}

### Objectifs SMART
- **S (SpÃ©cifique):** ${appState.tools.smart_s || '_Non renseignÃ©_'}
- **M (Mesurable):** ${appState.tools.smart_m || '_Non renseignÃ©_'}
- **A (Atteignable):** ${appState.tools.smart_a || '_Non renseignÃ©_'}
- **R (RÃ©aliste):** ${appState.tools.smart_r || '_Non renseignÃ©_'}
- **T (Temporel):** ${appState.tools.smart_t || '_Non renseignÃ©_'}

---

## Guerre Cognitive

### Contre-narrative
${appState.tools.gc_counter_narrative || '_Non renseignÃ©e_'}

---

_GÃ©nÃ©rÃ© par Plaidoyer Citoyen Workstation v${APP_VERSION}_
`;

    downloadFile(md, 'plaidoyer-project.md', 'text/markdown');
    showToast('success', 'Export Markdown', 'Fichier tÃ©lÃ©chargÃ© avec succÃ¨s.');
    closeExportModal();
}

function exportHTML() {
    const htmlContent = `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Projet de Plaidoyer - ${appState.tools.project_name || 'Export'}</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; line-height: 1.6; }
        h1, h2, h3 { color: #1a1a2e; }
        .section { margin: 2rem 0; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; }
        .label { font-weight: bold; color: #666; }
    </style>
</head>
<body>
    <h1>ğŸ“‹ ${appState.tools.project_name || 'Projet de Plaidoyer'}</h1>
    <p><em>Organisation: ${appState.tools.project_org || 'Non dÃ©finie'}</em></p>
    
    <div class="section">
        <h2>RÃ©sumÃ©</h2>
        <p>${appState.tools.project_summary || 'Non renseignÃ©'}</p>
    </div>

    <div class="section">
        <h2>ProblÃ©matique</h2>
        <p>${appState.tools.project_problem || 'Non renseignÃ©e'}</p>
    </div>

    <div class="section">
        <h2>Message de Plaidoyer</h2>
        <p><span class="label">Accroche:</span> ${appState.tools.msg_hook || 'Non renseignÃ©'}</p>
        <p><span class="label">ProblÃ¨me:</span> ${appState.tools.msg_problem || 'Non renseignÃ©'}</p>
        <p><span class="label">Importance:</span> ${appState.tools.msg_importance || 'Non renseignÃ©'}</p>
        <p><span class="label">Action demandÃ©e:</span> ${appState.tools.msg_action || 'Non renseignÃ©'}</p>
    </div>

    <footer style="text-align: center; margin-top: 3rem; color: #999;">
        GÃ©nÃ©rÃ© par Plaidoyer Citoyen Workstation v${APP_VERSION}
    </footer>
</body>
</html>`;

    downloadFile(htmlContent, 'plaidoyer-project.html', 'text/html');
    showToast('success', 'Export HTML', 'Fichier tÃ©lÃ©chargÃ© avec succÃ¨s.');
    closeExportModal();
}

function importData() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.json';
    input.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (event) => {
            try {
                const data = JSON.parse(event.target.result);
                appState = { ...appState, ...data };
                saveState();
                restoreFormData();
                updateARGDisplay();
                updateStats();
                showToast('success', 'Import rÃ©ussi', 'DonnÃ©es importÃ©es avec succÃ¨s.');
            } catch (err) {
                showToast('error', 'Erreur', 'Fichier JSON invalide.');
            }
        };
        reader.readAsText(file);
    };
    input.click();
}

function importJSON(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const data = JSON.parse(e.target.result);
            appState = { ...appState, ...data };
            saveState();
            restoreFormData();
            showToast('success', 'Import JSON', 'DonnÃ©es importÃ©es avec succÃ¨s.');
        } catch (err) {
            showToast('error', 'Erreur', 'Fichier JSON invalide.');
        }
    };
    reader.readAsText(file);
}

function importMarkdown(event) {
    showToast('info', 'Import Markdown', 'FonctionnalitÃ© en dÃ©veloppement.');
}

function importCSV(event) {
    showToast('info', 'Import CSV', 'FonctionnalitÃ© en dÃ©veloppement.');
}

function exportPDF() {
    showToast('info', 'Export PDF', 'Utilisez Ctrl+P (ou Cmd+P sur Mac) pour imprimer en PDF.');
    window.print();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function downloadFile(content, filename, mimeType) {
    const blob = new Blob([content], { type: mimeType });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function showToast(type, title, message) {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icons = {
        success: 'âœ…',
        error: 'âŒ',
        info: 'â„¹ï¸',
        warning: 'âš ï¸'
    };

    toast.innerHTML = `
        <div class="toast-icon">${icons[type]}</div>
        <div class="toast-content">
            <div class="toast-title">${title}</div>
            <div class="toast-message">${message}</div>
        </div>
    `;

    container.appendChild(toast);

    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100px)';
        setTimeout(() => toast.remove(), 300);
    }, 4000);
}

// Close modal on backdrop click
document.getElementById('export-modal').addEventListener('click', (e) => {
    if (e.target.id === 'export-modal') closeExportModal();
});

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
    if (e.ctrlKey || e.metaKey) {
        if (e.key === 's') {
            e.preventDefault();
            saveProject();
        }
    }
    if (e.key === 'Escape') {
        closeExportModal();
    }
});

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
