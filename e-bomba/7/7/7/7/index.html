<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guerre Cognitive : Doctrine & Chaos | Dashboard Stratégique</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Styles Personnalisés & Chart Containers -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* Slate-100 */
            color: #0f172a; /* Slate-900 */
        }
        
        h1, h2, h3, h4, .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Conteneurs de graphiques réactifs (CRUCIAL) */
        .chart-container-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max-width pour lisibilité sur grand écran */
            height: 350px;    /* Hauteur fixe pour éviter le saut de contenu */
            max-height: 400px;
        }

        /* Effets d'interaction */
        .interactive-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .interactive-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #3b82f6; /* Blue-500 */
        }

        .toggle-content {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .toggle-content.open {
            max-height: 500px; /* Valeur arbitraire suffisante pour le contenu */
            opacity: 1;
        }
    </style>

    <!-- Chosen Palette: Slate (Fond neutre/tech), Blue (Intelligence/Données), Red (Menace/Chaos), Emerald (Défense/Résilience) -->
    
    <!-- Application Structure Plan: 
         Structure Dashboard "War Room" pour une immersion stratégique.
         1. Header: Titre et résumé exécutif du changement de paradigme.
         2. Matrice Comparative (Radar): Visualiser le passage Cinétique -> Cognitif.
         3. Le Noyau Théorique (Cartes Interactives): Explorer l'Auftragstaktik et le Chaos.
         4. Simulateur de Perturbation (Plotly): L'élément central. L'utilisateur injecte du "bruit" pour voir l'effet papillon.
         5. Archives Opérationnelles (Grid): Études de cas (GameStop, SolarWinds).
         6. Audit de Résilience (Interactive Checklist + Bar Chart): Outil d'auto-évaluation.
    -->

    <!-- Visualization & Content Choices:
         1. Radar Chart: Comparaison multi-axiale (Vitesse, Portée, Coût, etc.) entre Guerre Classique et Hybride.
         2. Plotly Line Chart: Simulation mathématique du Chaos (Map Logistique) pour montrer la "sensibilité aux conditions initiales".
         3. Bar Chart Dynamique: Feedback visuel immédiat pour l'audit de défense.
         4. Interactions: Sliders, Checkboxes, Toggle Cards pour l'exploration active.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-2">
                    <span class="text-2xl font-bold tracking-tighter text-slate-900 font-mono">COGNITIVE<span class="text-blue-600">DOMINATION</span></span>
                </div>
                <div class="hidden md:flex space-x-1">
                    <button onclick="scrollToId('mission')" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md transition-colors">Mission</button>
                    <button onclick="scrollToId('doctrine')" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md transition-colors">Doctrine</button>
                    <button onclick="scrollToId('simulation')" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md transition-colors">Simulation</button>
                    <button onclick="scrollToId('defense')" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-emerald-600 rounded-md transition-colors">Défense</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero / Intro -->
    <header id="mission" class="bg-white border-b border-slate-200 pt-16 pb-12">
        <div class="max-w-5xl mx-auto px-4 text-center">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-100 text-slate-600 text-xs font-mono font-bold mb-6">
                <span class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></span>
                RAPPORT STRATÉGIQUE: NIVEAU CONFIDENTIEL
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight leading-tight">
                L'Hybridation du Chaos et de la Sémantique
            </h1>
            <p class="text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed mb-8">
                Bienvenue dans la <strong>Guerre Économique Totale</strong>. Ici, la conquête n'est plus territoriale mais mentale. Ce dashboard analyse comment la fusion du commandement décentralisé (<em>Auftragstaktik</em>) et des dynamiques non-linéaires redéfinit la domination mondiale.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-24">

        <!-- SECTION 1: LE CHANGEMENT DE PARADIGME (Radar) -->
        <section class="grid lg:grid-cols-2 gap-12 items-center">
            <div>
                <h2 class="text-2xl font-bold text-slate-900 mb-4 font-mono flex items-center gap-2">
                    <span class="bg-blue-600 text-white text-xs px-2 py-1 rounded">FIG. 01</span>
                    La Convergence des Champs
                </h2>
                <p class="text-slate-600 mb-6 text-justify">
                    Le XXIe siècle marque la fin de la distinction binaire Paix/Guerre. Nous entrons dans une "zone grise" permanente. L'objectif n'est plus de détruire les infrastructures physiques, mais de <strong>saturer l'espace sémantique</strong> pour effondrer la valeur perçue de l'ennemi. La valeur d'une entité dépend désormais intégralement de sa représentation numérique.
                </p>
                <div class="bg-slate-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                    <h4 class="text-sm font-bold text-slate-900 mb-1">Concept Clé : La Zone Grise</h4>
                    <p class="text-sm text-slate-600">Un espace conflictuel où les agressions (désinformation, cyber-sabotage) restent sous le seuil de la réponse militaire conventionnelle, rendant la défense classique obsolète.</p>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100">
                <div class="mb-2 text-center">
                    <h3 class="text-lg font-bold text-slate-800">Signature Spectrale du Conflit</h3>
                </div>
                <div class="chart-container-wrapper">
                    <div class="chart-container">
                        <canvas id="paradigmChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 flex justify-center gap-6 text-sm">
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded-full bg-slate-400"></span>
                        <span class="text-slate-500">Guerre Cinétique (XXe)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded-full bg-red-500"></span>
                        <span class="text-slate-900 font-bold">Guerre Cognitive (XXIe)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: LA DOCTRINE (Interactive Cards) -->
        <section id="doctrine" class="scroll-mt-24">
            <div class="text-center max-w-3xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-slate-900 mb-4 font-mono">L'Architecture de la Domination</h2>
                <p class="text-slate-600">
                    Cette nouvelle doctrine repose sur la synthèse improbable de deux cadres théoriques. Cliquez sur les modules ci-dessous pour analyser leur fusion.
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Module 1 -->
                <div class="bg-white rounded-xl border border-slate-200 p-6 interactive-card cursor-pointer" onclick="toggleCard('card1')">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600 font-bold font-mono">01</div>
                        <h3 class="text-xl font-bold text-slate-900">Auftragstaktik</h3>
                    </div>
                    <p class="text-sm text-slate-500 font-mono uppercase tracking-wide mb-2">Le Commandement de Mission</p>
                    <p class="text-slate-600 text-sm">
                        Héritage prussien. Le commandement définit l'intention ("le pourquoi"), mais laisse une liberté totale sur l'exécution ("le comment") aux unités locales.
                    </p>
                    <div id="card1-content" class="toggle-content mt-4 pt-4 border-t border-slate-100">
                        <p class="text-sm font-bold text-blue-700 mb-2">Application Hybride :</p>
                        <p class="text-xs text-slate-600 leading-relaxed">
                            Dans la guerre de l'information, cela permet à des milliers d'acteurs (trolls, bots, activistes) d'attaquer une cible de manière organique et imprévisible, sans attendre d'ordres centraux, saturant les défenses adverses.
                        </p>
                    </div>
                    <div class="mt-4 text-center text-xs text-slate-400">▼ Détails</div>
                </div>

                <!-- Module 2 (Center) -->
                <div class="flex flex-col justify-center items-center">
                    <div class="bg-slate-900 text-white rounded-xl p-6 shadow-xl w-full h-full flex flex-col justify-center relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-6xl font-mono">∑</div>
                        <h3 class="text-xl font-bold mb-2 font-mono text-center text-blue-400">COMMANDO SÉMANTIQUE</h3>
                        <p class="text-sm text-slate-300 text-center mb-4">
                            L'arme ultime : Une unité autonome capable de générer du chaos informationnel.
                        </p>
                        <div class="bg-white/10 rounded p-3 text-xs font-mono text-blue-200">
                            > Input: Intention Stratégique<br>
                            > Process: Exécution Décentralisée<br>
                            > Output: Effondrement Systémique
                        </div>
                    </div>
                </div>

                <!-- Module 3 -->
                <div class="bg-white rounded-xl border border-slate-200 p-6 interactive-card cursor-pointer" onclick="toggleCard('card3')">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 font-bold font-mono">02</div>
                        <h3 class="text-xl font-bold text-slate-900">Théorie du Chaos</h3>
                    </div>
                    <p class="text-sm text-slate-500 font-mono uppercase tracking-wide mb-2">Sensibilité aux conditions initiales</p>
                    <p class="text-slate-600 text-sm">
                        L'effet papillon : une variation infime dans les données d'entrée peut provoquer des conséquences massives et imprévisibles à la sortie.
                    </p>
                    <div id="card3-content" class="toggle-content mt-4 pt-4 border-t border-slate-100">
                        <p class="text-sm font-bold text-red-700 mb-2">Application Hybride :</p>
                        <p class="text-xs text-slate-600 leading-relaxed">
                            Introduire un "bruit" sémantique mineur (une rumeur crédible, un faux signal) au moment critique pour déstabiliser des systèmes complexes comme les marchés financiers ou l'opinion publique.
                        </p>
                    </div>
                    <div class="mt-4 text-center text-xs text-slate-400">▼ Détails</div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: SIMULATEUR DE CHAOS (Plotly) -->
        <section id="simulation" class="scroll-mt-24 bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
            <div class="bg-slate-900 p-6 md:p-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-white font-mono flex items-center gap-3">
                        <span class="text-blue-500">⚡</span> SIMULATEUR D'EFFET PAPILLON
                    </h2>
                    <p class="text-slate-400 text-sm mt-1">Démontrez comment l'injection de désinformation (bruit) brise la stabilité.</p>
                </div>
                <span class="px-3 py-1 rounded bg-blue-900/50 text-blue-200 text-xs font-mono border border-blue-800">
                    STATUS: ACTIF
                </span>
            </div>

            <div class="grid lg:grid-cols-3 divide-y lg:divide-y-0 lg:divide-x divide-slate-100">
                <!-- Contrôles -->
                <div class="p-8 bg-slate-50 space-y-8">
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-4 font-mono">
                            NIVEAU D'INJECTION (BRUIT)
                        </label>
                        <input type="range" id="chaosSlider" min="0" max="100" value="5" 
                               class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                        <div class="flex justify-between mt-2 font-mono text-xs">
                            <span class="text-slate-500">Stable (0%)</span>
                            <span id="chaosValue" class="text-blue-600 font-bold text-lg">5%</span>
                            <span class="text-red-500">Chaos (100%)</span>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Indicateurs Tactiques</p>
                        <div id="indicator-1" class="flex items-center gap-3 p-3 bg-white rounded border border-slate-200 shadow-sm transition-all duration-300">
                            <div class="w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"></div>
                            <span class="text-sm font-medium text-slate-700">Intégrité Sémantique</span>
                        </div>
                        <div id="indicator-2" class="flex items-center gap-3 p-3 bg-white rounded border border-slate-200 shadow-sm transition-all duration-300">
                            <div class="w-3 h-3 rounded-full bg-slate-300"></div>
                            <span class="text-sm font-medium text-slate-700">Saturation Cognitive</span>
                        </div>
                    </div>

                    <button onclick="updateSimulation()" class="w-full py-3 bg-slate-900 text-white rounded-lg font-bold hover:bg-slate-800 transition-colors shadow-lg active:scale-95 transform transition-transform text-sm font-mono">
                        LANCER LA SIMULATION
                    </button>
                </div>

                <!-- Graphique -->
                <div class="lg:col-span-2 p-4 md:p-8 bg-white relative">
                    <div id="chaosPlot" class="w-full h-[400px]"></div>
                    <div class="absolute bottom-4 left-0 w-full text-center pointer-events-none">
                        <span class="text-xs text-slate-400 font-mono bg-white/80 px-2">Axe X: Temps (Cycles) | Axe Y: Cohérence du Système</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: ARCHIVES OPÉRATIONNELLES (Grid) -->
        <section class="scroll-mt-24">
            <h2 class="text-2xl font-bold text-slate-900 mb-8 font-mono border-l-4 border-slate-900 pl-4">
                Archives : Preuves de Concept
            </h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Case 1 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors">
                    <div class="text-xs font-mono font-bold text-blue-600 mb-2">FINANCE DÉCENTRALISÉE</div>
                    <h3 class="text-lg font-bold text-slate-900 mb-2">L'Affaire GameStop</h3>
                    <p class="text-sm text-slate-600 mb-4 line-clamp-4">
                        Exemple parfait d'Auftragstaktik civile. Une nuée d'acteurs individuels (Reddit), sans chef central mais avec une intention commune, a coordonné une attaque sémantique et financière massive contre des fonds spéculatifs.
                    </p>
                    <span class="inline-block px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded font-mono">Swarming</span>
                </div>

                <!-- Case 2 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-red-300 transition-colors">
                    <div class="text-xs font-mono font-bold text-red-600 mb-2">SÉCURITÉ NATIONALE</div>
                    <h3 class="text-lg font-bold text-slate-900 mb-2">SolarWinds</h3>
                    <p class="text-sm text-slate-600 mb-4 line-clamp-4">
                        Une attaque sur la chaîne de confiance. L'objectif n'était pas seulement l'espionnage, mais la destruction de la certitude de sécurité. Une modification des "conditions initiales" de tout le réseau fédéral US.
                    </p>
                    <span class="inline-block px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded font-mono">Supply Chain</span>
                </div>

                <!-- Case 3 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-purple-300 transition-colors">
                    <div class="text-xs font-mono font-bold text-purple-600 mb-2">MANIPULATION PSYCHOGRAPHIQUE</div>
                    <h3 class="text-lg font-bold text-slate-900 mb-2">Cambridge Analytica</h3>
                    <p class="text-sm text-slate-600 mb-4 line-clamp-4">
                        Industrialisation du ciblage cognitif. Utilisation de données massives pour créer des réalités alternatives personnalisées, fragmentant le consensus social nécessaire à la démocratie.
                    </p>
                    <span class="inline-block px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded font-mono">Micro-Targeting</span>
                </div>
            </div>
        </section>

        <!-- SECTION 5: AUDIT DE RÉSILIENCE (Checklist + Chart) -->
        <section id="defense" class="scroll-mt-24 mb-24">
            <div class="bg-slate-900 rounded-3xl p-8 md:p-12 text-white shadow-2xl overflow-hidden relative">
                <!-- Background decorative element -->
                <div class="absolute top-0 right-0 w-64 h-64 bg-emerald-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>

                <div class="relative z-10 grid lg:grid-cols-2 gap-12 items-start">
                    <div>
                        <h2 class="text-3xl font-bold mb-4 font-mono">Protocole de Défense</h2>
                        <p class="text-slate-400 mb-8">
                            La défense statique (firewalls, démentis officiels) est inefficace contre le chaos sémantique. Seule une <strong>résilience dynamique</strong> fonctionne. Évaluez votre posture actuelle :
                        </p>
                        
                        <div class="space-y-4" id="defenseChecklist">
                            <label class="flex items-start gap-4 p-4 bg-slate-800/50 rounded-xl cursor-pointer hover:bg-slate-800 transition-colors border border-slate-700/50">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-700 defense-input" onchange="calcDefense()">
                                <div>
                                    <div class="font-bold text-sm text-emerald-100">Audit Sémantique Continu</div>
                                    <div class="text-xs text-slate-400 mt-1">Monitorer non seulement les mentions, mais l'évolution du sens des mots-clés associés à votre marque.</div>
                                </div>
                            </label>

                            <label class="flex items-start gap-4 p-4 bg-slate-800/50 rounded-xl cursor-pointer hover:bg-slate-800 transition-colors border border-slate-700/50">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-700 defense-input" onchange="calcDefense()">
                                <div>
                                    <div class="font-bold text-sm text-emerald-100">Décentralisation de la Riposte</div>
                                    <div class="text-xs text-slate-400 mt-1">Accorder l'autonomie aux équipes locales pour démentir ou contre-attaquer sans validation centrale (Auftragstaktik défensif).</div>
                                </div>
                            </label>

                            <label class="flex items-start gap-4 p-4 bg-slate-800/50 rounded-xl cursor-pointer hover:bg-slate-800 transition-colors border border-slate-700/50">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-700 defense-input" onchange="calcDefense()">
                                <div>
                                    <div class="font-bold text-sm text-emerald-100">Narration "Dormante"</div>
                                    <div class="text-xs text-slate-400 mt-1">Pré-positionner des contenus positifs et des alliés (influenceurs) prêts à être activés en cas de crise.</div>
                                </div>
                            </label>

                            <label class="flex items-start gap-4 p-4 bg-slate-800/50 rounded-xl cursor-pointer hover:bg-slate-800 transition-colors border border-slate-700/50">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-700 defense-input" onchange="calcDefense()">
                                <div>
                                    <div class="font-bold text-sm text-emerald-100">Sanctuarisation des Actifs</div>
                                    <div class="text-xs text-slate-400 mt-1">Protéger les identités numériques critiques et les canaux de communication officiels contre l'usurpation.</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="flex flex-col items-center justify-center bg-slate-800/30 rounded-2xl p-6 border border-slate-700/50">
                        <h3 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6">Score de Résilience</h3>
                        <div class="chart-container-wrapper">
                            <div class="chart-container" style="height: 250px;">
                                <canvas id="defenseChart"></canvas>
                            </div>
                        </div>
                        <div class="text-center mt-6">
                            <div id="scoreDisplay" class="text-5xl font-mono font-bold text-red-500 transition-colors duration-500">0%</div>
                            <div id="defenseVerdict" class="text-sm font-bold mt-2 text-red-400 uppercase tracking-wide">Vulnérabilité Critique</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-50 border-t border-slate-200 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm font-mono">
            <p class="mb-2">Analyse basée sur le rapport : "Guerre Hybride, Chaos et Sémantique"</p>
            <p>Outil de visualisation tactique généré par IA.</p>
        </div>
    </footer>

    <!-- LOGIQUE JAVASCRIPT -->
    <script>
        // --- 1. Gestion de la Navigation et UI ---
        function scrollToId(id) {
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }

        function toggleCard(id) {
            const content = document.getElementById(id + '-content');
            if (content) {
                content.classList.toggle('open');
            }
        }

        // --- 2. Chart.js : Radar de Paradigme ---
        function initRadar() {
            const ctx = document.getElementById('paradigmChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Vitesse d\'Exécution', 'Impact Psychologique', 'Décentralisation', 'Létalité Physique', 'Opacité / Attribution', 'Coût Financier'],
                    datasets: [{
                        label: 'Guerre Classique',
                        data: [40, 30, 20, 90, 20, 90],
                        fill: true,
                        backgroundColor: 'rgba(148, 163, 184, 0.2)', // Slate-400
                        borderColor: 'rgb(148, 163, 184)',
                        pointBackgroundColor: 'rgb(148, 163, 184)',
                        pointBorderColor: '#fff',
                    }, {
                        label: 'Guerre Cognitive (Hybride)',
                        data: [95, 100, 90, 10, 95, 30],
                        fill: true,
                        backgroundColor: 'rgba(239, 68, 68, 0.2)', // Red-500
                        borderColor: 'rgb(239, 68, 68)',
                        pointBackgroundColor: 'rgb(239, 68, 68)',
                        pointBorderColor: '#fff',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: { line: { borderWidth: 3 } },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0,0,0,0.05)' },
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            pointLabels: {
                                font: { size: 10, family: 'Inter' },
                                color: '#64748b' // Slate-500
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false } // Masquer les chiffres de l'échelle pour la clarté
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            titleFont: { family: 'JetBrains Mono' }
                        }
                    }
                }
            });
        }

        // --- 3. Plotly.js : Simulation du Chaos ---
        function updateSimulation() {
            const slider = document.getElementById('chaosSlider');
            const display = document.getElementById('chaosValue');
            const ind1 = document.getElementById('indicator-1');
            const ind2 = document.getElementById('indicator-2');
            
            if (!slider || !display) return;

            const noiseLevel = parseInt(slider.value);
            display.innerText = noiseLevel + '%';

            // Mise à jour visuelle des indicateurs (Simplifiée pour éviter les erreurs DOM)
            // On change les couleurs via Tailwind classes ou manipulation directe du style
            const bulb1 = ind1.firstElementChild;
            const text1 = ind1.lastElementChild;
            const bulb2 = ind2.firstElementChild;
            const text2 = ind2.lastElementChild;

            if (noiseLevel > 40) {
                // Chaos Mode
                bulb1.className = 'w-3 h-3 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.8)] animate-pulse';
                text1.innerText = 'Intégrité Compromise';
                text1.className = 'text-sm font-medium text-red-600';

                bulb2.className = 'w-3 h-3 rounded-full bg-red-500 animate-bounce';
                text2.innerText = 'Saturation Critique';
            } else {
                // Stable Mode
                bulb1.className = 'w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]';
                text1.innerText = 'Intégrité Sémantique';
                text1.className = 'text-sm font-medium text-slate-700';

                bulb2.className = 'w-3 h-3 rounded-full bg-slate-300';
                text2.innerText = 'Saturation Cognitive';
            }

            // Mathématique du Chaos (Map Logistique simplifiée avec bruit)
            // x(n+1) = r * x(n) * (1 - x(n)) + bruit
            // r varie de 3.5 (stable-ish) à 4.0 (chaos total) basé sur le slider
            const r = 3.5 + (noiseLevel / 200); 
            let x = 0.5;
            const xData = [];
            const yData = [];
            
            for (let i = 0; i < 50; i++) {
                xData.push(i);
                
                // Injection de bruit aléatoire si le niveau est élevé
                let randomNoise = 0;
                if (noiseLevel > 0) {
                     randomNoise = (Math.random() - 0.5) * (noiseLevel / 500);
                }

                x = r * x * (1 - x) + randomNoise;
                
                // Clamp pour rester dans le graph
                if(x < 0) x = 0;
                if(x > 1) x = 1;

                yData.push(x);
            }

            const trace = {
                x: xData,
                y: yData,
                mode: 'lines+markers',
                line: {
                    color: noiseLevel > 40 ? '#ef4444' : '#3b82f6', // Red or Blue
                    width: 2,
                    shape: 'spline'
                },
                marker: {
                    size: 6,
                    color: noiseLevel > 40 ? '#b91c1c' : '#1d4ed8',
                    opacity: 0.8
                }
            };

            const layout = {
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: { t: 20, r: 20, l: 40, b: 40 },
                xaxis: { 
                    showgrid: false, 
                    color: '#64748b' 
                },
                yaxis: { 
                    range: [0, 1.1], 
                    showgrid: true, 
                    gridcolor: '#f1f5f9',
                    color: '#64748b' 
                },
                showlegend: false
            };
            
            Plotly.newPlot('chaosPlot', [trace], layout, {displayModeBar: false, responsive: true});
        }

        // --- 4. Chart.js : Audit de Résilience ---
        let defenseChart = null;

        function initDefense() {
            const ctx = document.getElementById('defenseChart');
            if (!ctx) return;

            defenseChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Niveau de Protection'],
                    datasets: [{
                        label: 'Résilience',
                        data: [0],
                        backgroundColor: '#ef4444', // Start red
                        borderRadius: 8,
                        barThickness: 40
                    }]
                },
                options: {
                    indexAxis: 'y', // Bar horizontale
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { min: 0, max: 100, display: false },
                        y: { display: false }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function calcDefense() {
            const inputs = document.querySelectorAll('.defense-input');
            let activeCount = 0;
            inputs.forEach(input => {
                if (input.checked) activeCount++;
            });

            const score = (activeCount / inputs.length) * 100;
            const scoreDisplay = document.getElementById('scoreDisplay');
            const verdict = document.getElementById('defenseVerdict');

            // Animation du texte
            scoreDisplay.innerText = Math.round(score) + '%';
            
            // Mise à jour visuelle (Couleur et Texte)
            let color = '#ef4444'; // Red
            let text = 'Vulnérabilité Critique';
            let textColor = 'text-red-500';

            if (score >= 50 && score < 75) {
                color = '#f59e0b'; // Amber
                text = 'Défense Partielle';
                textColor = 'text-amber-500';
            } else if (score >= 75) {
                color = '#10b981'; // Emerald
                text = 'Résilience Optimale';
                textColor = 'text-emerald-500';
            }

            scoreDisplay.className = `text-5xl font-mono font-bold transition-colors duration-500 ${textColor}`;
            verdict.innerText = text;
            verdict.className = `text-sm font-bold mt-2 uppercase tracking-wide ${textColor}`;

            // Update Chart
            if (defenseChart) {
                defenseChart.data.datasets[0].data = [score];
                defenseChart.data.datasets[0].backgroundColor = color;
                defenseChart.update();
            }
        }

        // --- Initialisation Globale ---
        window.addEventListener('DOMContentLoaded', () => {
            initRadar();
            
            // Initialisation de la simulation
            const slider = document.getElementById('chaosSlider');
            if(slider) {
                slider.addEventListener('input', updateSimulation);
                updateSimulation(); // Premier appel
            }

            initDefense();
        });

    </script>
</body>
</html>
